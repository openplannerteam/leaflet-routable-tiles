!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=25)}([function(e,t,n){"use strict";(function(t,r){const o=n(2),i=n(1),a=n(12).IdentifierIssuer,s=n(3),u=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,l=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,c=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,f={accept:"application/ld+json, application/json"},d={};e.exports=d,d.IdentifierIssuer=a;const h="function"==typeof t&&t,p=h?e=>h(e):e=>setTimeout(e,0);function g(e,t,n){d.nextTick(()=>e(t,n))}"object"==typeof r&&"function"==typeof r.nextTick?d.nextTick=r.nextTick:d.nextTick=p,d.setImmediate=h?p:d.nextTick,d.clone=function(e){if(e&&"object"==typeof e){let t;if(i.isArray(e)){t=[];for(let n=0;n<e.length;++n)t[n]=d.clone(e[n])}else if(i.isObject(e)){t={};for(const n in e)t[n]=d.clone(e[n])}else t=e.toString();return t}return e},d.buildHeaders=((e={})=>{if(Object.keys(e).some(e=>"accept"===e.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+f.accept+'" is supported.');return Object.assign({Accept:f.accept},e)}),d.parseLinkHeader=(e=>{const t={},n=e.match(u);for(let e=0;e<n.length;++e){let r=n[e].match(l);if(!r)continue;const o={target:r[1]},i=r[2];for(;r=c.exec(i);)o[r[1]]=void 0===r[2]?r[3]:r[2];const a=o.rel||"";Array.isArray(t[a])?t[a].push(o):t[a]=a in t?[t[a],o]:o}return t}),d.validateTypeValue=(e=>{if(i.isString(e)||i.isEmptyObject(e))return;let t=!1;if(i.isArray(e)){t=!0;for(let n=0;n<e.length;++n)if(!i.isString(e[n])){t=!1;break}}if(!t)throw new s('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}),d.hasProperty=((e,t)=>{if(t in e){const n=e[t];return!i.isArray(n)||n.length>0}return!1}),d.hasValue=((e,t,n)=>{if(d.hasProperty(e,t)){let r=e[t];const a=o.isList(r);if(i.isArray(r)||a){a&&(r=r["@list"]);for(let e=0;e<r.length;++e)if(d.compareValues(n,r[e]))return!0}else if(!i.isArray(n))return d.compareValues(n,r)}return!1}),d.addValue=((e,t,n,r)=>{if("propertyIsArray"in(r=r||{})||(r.propertyIsArray=!1),"allowDuplicate"in r||(r.allowDuplicate=!0),i.isArray(n)){0!==n.length||!r.propertyIsArray||t in e||(e[t]=[]);for(let o=0;o<n.length;++o)d.addValue(e,t,n[o],r)}else if(t in e){const o=!r.allowDuplicate&&d.hasValue(e,t,n);i.isArray(e[t])||o&&!r.propertyIsArray||(e[t]=[e[t]]),o||e[t].push(n)}else e[t]=r.propertyIsArray?[n]:n}),d.getValues=((e,t)=>[].concat(e[t]||[])),d.removeProperty=((e,t)=>{delete e[t]}),d.removeValue=((e,t,n,r)=>{"propertyIsArray"in(r=r||{})||(r.propertyIsArray=!1);const o=d.getValues(e,t).filter(e=>!d.compareValues(e,n));0===o.length?d.removeProperty(e,t):1!==o.length||r.propertyIsArray?e[t]=o:e[t]=o[0]}),d.relabelBlankNodes=((e,t)=>{return function e(t,n){if(i.isArray(n))for(let r=0;r<n.length;++r)n[r]=e(t,n[r]);else if(o.isList(n))n["@list"]=e(t,n["@list"]);else if(i.isObject(n)){o.isBlankNode(n)&&(n["@id"]=t.getId(n["@id"]));const r=Object.keys(n).sort();for(let o=0;o<r.length;++o){const i=r[o];"@id"!==i&&(n[i]=e(t,n[i]))}}return n}((t=t||{}).issuer||new a("_:b"),e)}),d.compareValues=((e,t)=>e===t||(!(!o.isValue(e)||!o.isValue(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(i.isObject(e)&&"@id"in e&&i.isObject(t)&&"@id"in t)&&e["@id"]===t["@id"])),d.compareShortestLeast=((e,t)=>e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1),d.normalizeDocumentLoader=(e=>e.length<2?d.callbackify(e):async function(t){const n=arguments[1];return new Promise((r,o)=>{try{e(t,(e,t)=>{if("function"==typeof n)return g(n,e,t);e?o(e):r(t)})}catch(e){if("function"==typeof n)return g(n,e);o(e)}})}),d.callbackify=(e=>(async function(...t){const n=t[t.length-1];let r;"function"==typeof n&&t.pop();try{r=await e.apply(null,t)}catch(e){if("function"==typeof n)return g(n,e);throw e}return"function"==typeof n?g(n,null,r):r}))}).call(this,n(13).setImmediate,n(6))},function(e,t,n){"use strict";const r={};e.exports=r,r.isArray=Array.isArray,r.isBoolean=(e=>"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e)),r.isDouble=(e=>r.isNumber(e)&&-1!==String(e).indexOf(".")),r.isEmptyObject=(e=>r.isObject(e)&&0===Object.keys(e).length),r.isNumber=(e=>"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)),r.isNumeric=(e=>!isNaN(parseFloat(e))&&isFinite(e)),r.isObject=(e=>"[object Object]"===Object.prototype.toString.call(e)),r.isString=(e=>"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)),r.isUndefined=(e=>void 0===e)},function(e,t,n){"use strict";const r=n(1),o={};e.exports=o,o.isSubject=(e=>{if(r.isObject(e)&&!("@value"in e||"@set"in e||"@list"in e)){return Object.keys(e).length>1||!("@id"in e)}return!1}),o.isSubjectReference=(e=>r.isObject(e)&&1===Object.keys(e).length&&"@id"in e),o.isValue=(e=>r.isObject(e)&&"@value"in e),o.isList=(e=>r.isObject(e)&&"@list"in e),o.isGraph=(e=>r.isObject(e)&&"@graph"in e&&1===Object.keys(e).filter(e=>"@id"!==e&&"@index"!==e).length),o.isSimpleGraph=(e=>o.isGraph(e)&&!("@id"in e)),o.isBlankNode=(e=>!!r.isObject(e)&&("@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e)))},function(e,t,n){"use strict";e.exports=class extends Error{constructor(e="An unspecified JSON-LD error occurred.",t="jsonld.Error",n={}){super(e),this.name=t,this.message=e,this.details=n}}},function(e,t,n){"use strict";(function(t,n){const r={};e.exports=r;const o="function"==typeof t&&t,i=o?e=>o(e):e=>setTimeout(e,0);function a(e,t,r){try{return e(t,r)}catch(e){n.nextTick(()=>{throw e})}}"object"==typeof n&&"function"==typeof n.nextTick?r.nextTick=n.nextTick:r.nextTick=i,r.setImmediate=o?i:r.nextTick,r.clone=function(e){if(e&&"object"==typeof e){let t;if(Array.isArray(e)){t=[];for(let n=0;n<e.length;++n)t[n]=r.clone(e[n])}else if(r.isObject(e)){t={};for(let n in e)t[n]=r.clone(e[n])}else t=e.toString();return t}return e},r.isObject=(e=>"[object Object]"===Object.prototype.toString.call(e)),r.isUndefined=(e=>void 0===e),r.callbackify=(e=>(async function(...t){const n=t[t.length-1];let r;"function"==typeof n&&t.pop();try{r=await e.apply(null,t)}catch(e){if("function"==typeof n)return a(n,e);throw e}return"function"==typeof n?a(n,null,r):r}))}).call(this,n(13).setImmediate,n(6))},function(e,t,n){"use strict";const r=n(0),o=n(41),i=n(3),{isArray:a,isObject:s,isString:u,isUndefined:l}=n(1),{isAbsolute:c,isRelative:f,prependBase:d,parse:h}=n(9),p=10,g=new Map,y={};function v(e,t,n,r){if(a(e))for(const o of e)v(o,t,n,r);else if(s(e))for(const o in e){if("@context"!==o){v(e[o],t,n,r);continue}const i=e[o];if(a(i)){let e=i.length;for(let o=0;o<e;++o){const l=i[o];if(u(l)){const s=d(r,l),u=t.get(s);n?a(u)?(Array.prototype.splice.apply(i,[o,1].concat(u)),o+=u.length-1,e=i.length):!1!==u&&(i[o]=u):void 0===u&&t.set(s,!1)}else for(const e in l)s(l[e])&&v(l[e],t,n,r)}}else if(u(i)){const a=d(r,i),s=t.get(a);n?!1!==s&&(e[o]=s):void 0===s&&t.set(a,!1)}else for(const e in i)s(i[e])&&v(i[e],t,n,r)}}e.exports=y,y.cache=new o,y.process=(({activeCtx:e,localCtx:t,options:n})=>{s(t)&&"@context"in t&&a(t["@context"])&&(t=t["@context"]);const r=a(t)?t:[t];if(0===r.length)return e;let o=e;for(let t=0;t<r.length;++t){let a=r[t];if(null===a){o=e=y.getInitialContext(n);continue}if(s(a)&&"@context"in a&&(a=a["@context"]),!s(a))throw new i("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:a});if(y.cache){const t=y.cache.get(e,a);if(t){o=e=t;continue}}e=o,o=o.clone();const l={};if("@version"in a){if(1.1!==a["@version"])throw new i("Unsupported JSON-LD version: "+a["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:a});if(e.processingMode&&"json-ld-1.0"===e.processingMode)throw new i("@version: "+a["@version"]+" not compatible with "+e.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:a});o.processingMode="json-ld-1.1",o["@version"]=a["@version"],l["@version"]=!0}if(o.processingMode=o.processingMode||e.processingMode||"json-ld-1.0","@base"in a){let t=a["@base"];if(null===t);else if(c(t))t=h(t);else{if(!f(t))throw new i('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:a});t=h(d(e["@base"].href,t))}o["@base"]=t,l["@base"]=!0}if("@vocab"in a){const e=a["@vocab"];if(null===e)delete o["@vocab"];else{if(!u(e))throw new i('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:a});if(!c(e))throw new i('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:a});o["@vocab"]=e}l["@vocab"]=!0}if("@language"in a){const e=a["@language"];if(null===e)delete o["@language"];else{if(!u(e))throw new i('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:a});o["@language"]=e.toLowerCase()}l["@language"]=!0}for(const e in a)y.createTermDefinition(o,a,e,l);y.cache&&y.cache.set(e,a,o)}return o}),y.createTermDefinition=((e,t,n,r)=>{if(n in r){if(r[n])return;throw new i("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:n})}if(r[n]=!1,y.isKeyword(n))throw new i("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:n});if(""===n)throw new i("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t});e.mappings[n]&&delete e.mappings[n];let o=t[n];if(null===o||s(o)&&null===o["@id"])return e.mappings[n]=null,void(r[n]=!0);let l=!1;if(u(o)&&(l=!0,o={"@id":o}),!s(o))throw new i("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});const f=e.mappings[n]={};f.reverse=!1;const d=["@container","@id","@language","@reverse","@type"];y.processingMode(e,1.1)&&d.push("@context","@nest","@prefix");for(const e in o)if(!d.includes(e))throw new i("Invalid JSON-LD syntax; a term definition must not contain "+e,"jsonld.SyntaxError",{code:"invalid term definition",context:t});const h=n.indexOf(":");if(f._termHasColon=-1!==h,"@reverse"in o){if("@id"in o)throw new i("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});if("@nest"in o)throw new i("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});const n=o["@reverse"];if(!u(n))throw new i("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});const a=y.expandIri(e,n,{vocab:!0,base:!1},t,r);if(!c(a))throw new i("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});f["@id"]=a,f.reverse=!0}else if("@id"in o){let a=o["@id"];if(!u(a))throw new i("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(a!==n){if(a=y.expandIri(e,a,{vocab:!0,base:!1},t,r),!c(a)&&!y.isKeyword(a))throw new i("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});f["@id"]=a,f._prefix=!f._termHasColon&&a.match(/[:\/\?#\[\]@]$/)&&(l||y.processingMode(e,1))}}if(!("@id"in f))if(f._termHasColon){const o=n.substr(0,h);if(o in t&&y.createTermDefinition(e,t,o,r),e.mappings[o]){const t=n.substr(h+1);f["@id"]=e.mappings[o]["@id"]+t}else f["@id"]=n}else{if(!("@vocab"in e))throw new i("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:n});f["@id"]=e["@vocab"]+n}if(r[n]=!0,"@type"in o){let n=o["@type"];if(!u(n))throw new i("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@id"!==n&&"@vocab"!==n){if(n=y.expandIri(e,n,{vocab:!0,base:!1},t,r),!c(n))throw new i("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===n.indexOf("_:"))throw new i("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}f["@type"]=n}if("@container"in o){const n=u(o["@container"])?[o["@container"]]:o["@container"]||[],r=["@list","@set","@index","@language"];let s=!0;const l=n.includes("@set");if(y.processingMode(e,1.1))if(r.push("@graph","@id","@type"),n.includes("@list")){if(1!==n.length)throw new i("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else if(n.includes("@graph")){if(n.some(e=>"@graph"!==e&&"@id"!==e&&"@index"!==e&&"@set"!==e))throw new i("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:t})}else s&=n.length<=(l?2:1);else s&=!a(o["@container"]),s&=n.length<=1;if(s&=n.every(e=>r.includes(e)),!(s&=!(l&&n.includes("@list"))))throw new i("Invalid JSON-LD syntax; @context @container value must be one of the following: "+r.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(f.reverse&&!n.every(e=>["@index","@set"].includes(e)))throw new i("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});f["@container"]=n}if("@context"in o&&(f["@context"]=o["@context"]),"@language"in o&&!("@type"in o)){let e=o["@language"];if(null!==e&&!u(e))throw new i("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==e&&(e=e.toLowerCase()),f["@language"]=e}if("@prefix"in o){if(f._termHasColon)throw new i("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:t});if("boolean"!=typeof o["@prefix"])throw new i("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:t});f._prefix=!0===o["@prefix"]}if("@nest"in o){const e=o["@nest"];if(!u(e)||"@nest"!==e&&0===e.indexOf("@"))throw new i("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:t});f["@nest"]=e}
// disallow aliasing @context and @preserve
const p=f["@id"];if("@context"===p||"@preserve"===p)throw new i("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t})}),y.expandIri=((e,t,n,r,o)=>{if(null===t||!u(t)||y.isKeyword(t))return t;if(r&&t in r&&!0!==o[t]&&y.createTermDefinition(e,r,t,o),(n=n||{}).vocab){const n=e.mappings[t];if(null===n)return null;if(n)return n["@id"]}const i=t.indexOf(":");if(-1!==i){const n=t.substr(0,i),a=t.substr(i+1);if("_"===n||0===a.indexOf("//"))return t;r&&n in r&&y.createTermDefinition(e,r,n,o);const s=e.mappings[n];return s?s["@id"]+a:t}return n.vocab&&"@vocab"in e?e["@vocab"]+t:n.base?d(e["@base"],t):t}),y.getInitialContext=(e=>{const t=h(e.base||""),n=JSON.stringify({base:t,processingMode:e.processingMode}),o=g.get(n);if(o)return o;const i={"@base":t,processingMode:e.processingMode,mappings:{},inverse:null,getInverse:function(){const e=this;if(e.inverse)return e.inverse;const t=e.inverse={},n=e.fastCurieMap={},o={},i=e["@language"]||"@none",u=e.mappings,l=Object.keys(u).sort(r.compareShortestLeast);for(let e=0;e<l.length;++e){const r=l[e],a=u[r];if(null===a)continue;let c=a["@container"]||"@none";c=[].concat(c).sort().join("");const f=[].concat(a["@id"]);for(let e=0;e<f.length;++e){const u=f[e];let l=t[u];const d=y.isKeyword(u);if(l)d||a._termHasColon||o[u].push(r);else if(t[u]=l={},!d&&!a._termHasColon){o[u]=[r];const e={iri:u,terms:o[u]};u[0]in n?n[u[0]].push(e):n[u[0]]=[e]}if(l[c]||(l[c]={"@language":{},"@type":{},"@any":{}}),l=l[c],s(r,l["@any"],"@none"),a.reverse)s(r,l["@type"],"@reverse");else if("@type"in a)s(r,l["@type"],a["@type"]);else if("@language"in a){const e=a["@language"]||"@null";s(r,l["@language"],e)}else s(r,l["@language"],i),s(r,l["@type"],"@none"),s(r,l["@language"],"@none")}}for(const e in n)a(n,e,1);return t},clone:function(){const e={};e["@base"]=this["@base"],e.mappings=r.clone(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,"@language"in this&&(e["@language"]=this["@language"]);"@vocab"in this&&(e["@vocab"]=this["@vocab"]);return e}};return 1e4===g.size&&g.clear(),g.set(n,i),i;function a(e,t,n){const r=e[t],o=e[t]={};let i,s;for(let e=0;e<r.length;++e)(s=n>=(i=r[e].iri).length?"":i[n])in o?o[s].push(r[e]):o[s]=[r[e]];for(const e in o)""!==e&&a(o,e,n+1)}function s(e,t,n){n in t||(t[n]=e)}}),y.getContextValue=((e,t,n)=>{if(null===t)return null;if(e.mappings[t]){const r=e.mappings[t];if(l(n))return r;if(n in r)return r[n]}return"@language"===n&&n in e?e[n]:null}),y.getAllContexts=(async(e,t)=>(async function(e,t){const n=r.normalizeDocumentLoader(t.documentLoader);return await async function e(n,r,o){if(r.size>p)throw new i("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:p});const l=new Map;v(n,l,!1,t.base);const c=[...l.keys()].filter(e=>!1===l.get(e));return Promise.all(c.map(async c=>{if(r.has(c))throw new i("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:c});const f=new Set(r);let d,h;f.add(c);try{d=await o(c),h=d.document||null,u(h)&&(h=JSON.parse(h))}catch(e){throw new i("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:c,cause:e})}if(!s(h))throw new i("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:c});h="@context"in h?{"@context":h["@context"]}:{"@context":{}},d.contextUrl&&(a(h["@context"])||(h["@context"]=[h["@context"]]),h["@context"].push(d.contextUrl)),await e(h,f,o),l.set(c,h["@context"]),v(n,l,!0,t.base)}))}(e,new Set,n),e})(e,t)),y.processingMode=((e,t)=>t.toString()>="1.1"?e.processingMode&&e.processingMode>="json-ld-"+t.toString():!e.processingMode||"json-ld-1.0"===e.processingMode),y.isKeyword=(e=>{if(!u(e))return!1;switch(e){case"@base":case"@container":case"@context":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1})},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,l=[],c=!1,f=-1;function d(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&h())}function h(){if(!c){var e=s(d);c=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){e.exports={options:{usePureJavaScript:!1}}},function(e,t,n){"use strict";const r="http://www.w3.org/1999/02/22-rdf-syntax-ns#",o="http://www.w3.org/2001/XMLSchema#";e.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",RDF:r,RDF_LIST:r+"List",RDF_FIRST:r+"first",RDF_REST:r+"rest",RDF_NIL:r+"nil",RDF_TYPE:r+"type",RDF_PLAIN_LITERAL:r+"PlainLiteral",RDF_XML_LITERAL:r+"XMLLiteral",RDF_OBJECT:r+"object",RDF_LANGSTRING:r+"langString",XSD:o,XSD_BOOLEAN:o+"boolean",XSD_DOUBLE:o+"double",XSD_INTEGER:o+"integer",XSD_STRING:o+"string"}},function(e,t,n){"use strict";const r=n(1),o={};e.exports=o,o.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},o.parse=((e,t)=>{const n={},r=o.parsers[t||"full"],i=r.regex.exec(e);let a=r.keys.length;for(;a--;)n[r.keys[a]]=void 0===i[a]?null:i[a];return("https"===n.scheme&&"443"===n.port||"http"===n.scheme&&"80"===n.port)&&(n.href=n.href.replace(":"+n.port,""),n.authority=n.authority.replace(":"+n.port,""),n.port=null),n.normalizedPath=o.removeDotSegments(n.path),n}),o.prependBase=((e,t)=>{if(null===e)return t;if(-1!==t.indexOf(":"))return t;r.isString(e)&&(e=o.parse(e||""));const n=o.parse(t),i={protocol:e.protocol||""};if(null!==n.authority)i.authority=n.authority,i.path=n.path,i.query=n.query;else if(i.authority=e.authority,""===n.path)i.path=e.path,null!==n.query?i.query=n.query:i.query=e.query;else{if(0===n.path.indexOf("/"))i.path=n.path;else{let t=e.path;(t=t.substr(0,t.lastIndexOf("/")+1)).length>0&&"/"!==t.substr(-1)&&(t+="/"),t+=n.path,i.path=t}i.query=n.query}""!==n.path&&(i.path=o.removeDotSegments(i.path));let a=i.protocol;return null!==i.authority&&(a+="//"+i.authority),a+=i.path,null!==i.query&&(a+="?"+i.query),null!==n.fragment&&(a+="#"+n.fragment),""===a&&(a="./"),a}),o.removeBase=((e,t)=>{if(null===e)return t;r.isString(e)&&(e=o.parse(e||""));let n="";if(""!==e.href?n+=(e.protocol||"")+"//"+(e.authority||""):t.indexOf("//")&&(n+="//"),0!==t.indexOf(n))return t;const i=o.parse(t.substr(n.length)),a=e.normalizedPath.split("/"),s=i.normalizedPath.split("/"),u=i.fragment||i.query?0:1;for(;a.length>0&&s.length>u&&a[0]===s[0];)a.shift(),s.shift();let l="";if(a.length>0){a.pop();for(let e=0;e<a.length;++e)l+="../"}return l+=s.join("/"),null!==i.query&&(l+="?"+i.query),null!==i.fragment&&(l+="#"+i.fragment),""===l&&(l="./"),l}),o.removeDotSegments=(e=>{if(0===e.length)return"";const t=e.split("/"),n=[];for(;t.length>0;){const e=t.shift(),r=0===t.length;"."!==e?".."!==e?n.push(e):(n.pop(),r&&n.push("")):r&&n.push("")}return n.length>0&&""!==n[0]&&n.unshift(""),1===n.length&&""===n[0]?"/":n.join("/")});const i=/^([A-Za-z][A-Za-z0-9+-.]*|_):/;o.isAbsolute=(e=>r.isString(e)&&i.test(e)),o.isRelative=(e=>r.isString(e))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";const{isKeyword:r}=n(5),o=n(2),i=n(1),a=n(0),s=n(3),u={};e.exports=u,u.createMergedNodeMap=((e,t)=>{const n=(t=t||{}).issuer||new a.IdentifierIssuer("_:b"),r={"@default":{}};return u.createNodeMap(e,r,"@default",n),u.mergeNodeMaps(r)}),u.createNodeMap=((e,t,n,l,c,f)=>{if(i.isArray(e)){for(let r=0;r<e.length;++r)u.createNodeMap(e[r],t,n,l,void 0,f);return}if(!i.isObject(e))return void(f&&f.push(e));if(o.isValue(e)){if("@type"in e){let t=e["@type"];0===t.indexOf("_:")&&(e["@type"]=t=l.getId(t))}return void(f&&f.push(e))}if("@type"in e){const t=e["@type"];for(let e=0;e<t.length;++e){const n=t[e];0===n.indexOf("_:")&&l.getId(n)}}i.isUndefined(c)&&(c=o.isBlankNode(e)?l.getId(e["@id"]):e["@id"]),f&&f.push({"@id":c});const d=t[n],h=d[c]=d[c]||{};h["@id"]=c;const p=Object.keys(e).sort();for(let i=0;i<p.length;++i){let f=p[i];if("@id"===f)continue;if("@reverse"===f){const r={"@id":c},i=e["@reverse"];for(const e in i){const s=i[e];for(let i=0;i<s.length;++i){const c=s[i];let f=c["@id"];o.isBlankNode(c)&&(f=l.getId(f)),u.createNodeMap(c,t,n,l,f),a.addValue(d[f],e,r,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===f){c in t||(t[c]={}),u.createNodeMap(e[f],t,c,l);continue}if("@type"!==f&&r(f)){if("@index"===f&&f in h&&(e[f]!==h[f]||e[f]["@id"]!==h[f]["@id"]))throw new s("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:h});h[f]=e[f];continue}const g=e[f];if(0===f.indexOf("_:")&&(f=l.getId(f)),0!==g.length)for(let e=0;e<g.length;++e){let r=g[e];if("@type"===f&&(r=0===r.indexOf("_:")?l.getId(r):r),o.isSubject(r)||o.isSubjectReference(r)){const e=o.isBlankNode(r)?l.getId(r["@id"]):r["@id"];a.addValue(h,f,{"@id":e},{propertyIsArray:!0,allowDuplicate:!1}),u.createNodeMap(r,t,n,l,e)}else if(o.isList(r)){const e=[];u.createNodeMap(r["@list"],t,n,l,c,e),r={"@list":e},a.addValue(h,f,r,{propertyIsArray:!0,allowDuplicate:!1})}else u.createNodeMap(r,t,n,l,c),a.addValue(h,f,r,{propertyIsArray:!0,allowDuplicate:!1})}else a.addValue(h,f,[],{propertyIsArray:!0})}}),u.mergeNodeMapGraphs=(e=>{const t={};for(const n of Object.keys(e).sort())for(const o of Object.keys(e[n]).sort()){const i=e[n][o];o in t||(t[o]={"@id":o});const s=t[o];for(const e of Object.keys(i).sort())if(r(e))s[e]=a.clone(i[e]);else for(const t of i[e])a.addValue(s,e,a.clone(t),{propertyIsArray:!0,allowDuplicate:!1})}return t}),u.mergeNodeMaps=(e=>{const t=e["@default"],n=Object.keys(e).sort();for(let r=0;r<n.length;++r){const i=n[r];if("@default"===i)continue;const a=e[i];let s=t[i];s?"@graph"in s||(s["@graph"]=[]):t[i]=s={"@id":i,"@graph":[]};const u=s["@graph"],l=Object.keys(a).sort();for(let e=0;e<l.length;++e){const t=a[l[e]];o.isSubjectReference(t)||u.push(t)}}return t})},function(e,t,n){"use strict";const r=n(4),o=n(19),i=n(34),a=n(24),s=n(35);let u;try{u=n(36)}catch(e){}const l={};e.exports=l,l.NQuads=n(16),l.IdentifierIssuer=n(14),l._rdfCanonizeNative=function(e){return e&&(u=e),u},l.canonize=r.callbackify(async function(e,t){let n;const r=new Promise((e,t)=>{n=((n,r)=>{if(n)return t(n);e(r)})});if(Array.isArray(e)||(e=l.NQuads.legacyDatasetToQuads(e)),t.useNative){if(!u)throw new Error("rdf-canonize-native not available");u.canonize(e,t,n)}else if("URDNA2015"===t.algorithm)new o(t).main(e,n);else{if("URGNA2012"!==t.algorithm)throw"algorithm"in t?new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.");new i(t).main(e,n)}return r}),l.canonizeSync=function(e,t){if(Array.isArray(e)||(e=l.NQuads.legacyDatasetToQuads(e)),t.useNative){if(u)return u.canonizeSync(e,t);throw new Error("rdf-canonize-native not available")}if("URDNA2015"===t.algorithm)return new a(t).main(e);if("URGNA2012"===t.algorithm)return new s(t).main(e);if(!("algorithm"in t))throw new Error("No RDF Dataset Canonicalization algorithm specified.");throw new Error("Invalid RDF Dataset Canonicalization algorithm: "+t.algorithm)}},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(26),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(10))},function(e,t,n){"use strict";const r=n(4);e.exports=class e{constructor(e){this.prefix=e,this.counter=0,this.existing={}}clone(){const t=new e(this.prefix);return t.counter=this.counter,t.existing=r.clone(this.existing),t}getId(e){if(e&&e in this.existing)return this.existing[e];const t=this.prefix+this.counter;return this.counter+=1,e&&(this.existing[e]=t),t}hasId(e){return e in this.existing}}},function(e,t,n){var r=n(7);e.exports=r.md=r.md||{},r.md.algorithms=r.md.algorithms||{}},function(e,t,n){"use strict";const r="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",o="http://www.w3.org/2001/XMLSchema#string",i={};function a(e,t){for(const n in e)if(e[n].termType!==t[n].termType||e[n].value!==t[n].value)return!1;return"Literal"!==e.termType||e.object.datatype.termType===t.object.datatype.termType&&e.object.datatype.value===t.object.datatype.value&&e.object.language===t.object.language}i.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,i.empty=new RegExp("^[ \\t]*$"),i.quad=new RegExp('^[ \\t]*(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9])(?:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀.])*(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀]))?))[ \\t]+(?:<([^:]+:[^>]*)>)[ \\t]+(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9])(?:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀.])*(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀]))?)|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^(?:<([^:]+:[^>]*)>))|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))[ \\t]*(?:\\.|(?:(?:(?:<([^:]+:[^>]*)>)|(_:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9])(?:(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀.])*(?:[A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�_0-9-·̀-ͯ‿-⁀]))?))[ \\t]*\\.))[ \\t]*$'),e.exports=class e{static parse(e){const t=[],n={},s=e.split(i.eoln);let l=0;for(const e of s){if(l++,i.empty.test(e))continue;const s=e.match(i.quad);if(null===s)throw new Error("N-Quads parse error on line "+l+".");const c={};if(void 0!==s[1]?c.subject={termType:"NamedNode",value:s[1]}:c.subject={termType:"BlankNode",value:s[2]},c.predicate={termType:"NamedNode",value:s[3]},void 0!==s[4]?c.object={termType:"NamedNode",value:s[4]}:void 0!==s[5]?c.object={termType:"BlankNode",value:s[5]}:(c.object={termType:"Literal",value:void 0,datatype:{termType:"NamedNode"}},void 0!==s[7]?c.object.datatype.value=s[7]:void 0!==s[8]?(c.object.datatype.value=r,c.object.language=s[8]):c.object.datatype.value=o,c.object.value=s[6].replace(u,function(e,t,n,r){if(t)switch(t){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(n)return String.fromCharCode(parseInt(n,16));if(r)throw new Error("Unsupported U escape")})),void 0!==s[9]?c.graph={termType:"NamedNode",value:s[9]}:void 0!==s[10]?c.graph={termType:"BlankNode",value:s[10]}:c.graph={termType:"DefaultGraph",value:""},c.graph.value in n){let e=!0;const r=n[c.graph.value];for(const t of r)if(a(t,c)){e=!1;break}e&&(r.push(c),t.push(c))}else n[c.graph.value]=[c],t.push(c)}return t}static serialize(t){Array.isArray(t)||(t=e.legacyDatasetToQuads(t));const n=[];for(const r of t)n.push(e.serializeQuad(r));return n.sort().join("")}static serializeQuad(e){const t=e.subject,n=e.predicate,i=e.object,a=e.graph;let u="";return[t,n].forEach(e=>{"NamedNode"===e.termType?u+="<"+e.value+">":u+=e.value,u+=" "}),"NamedNode"===i.termType?u+="<"+i.value+">":"BlankNode"===i.termType?u+=i.value:(u+='"'+function(e){return e.replace(s,function(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(i.value)+'"',i.datatype.value===r?i.language&&(u+="@"+i.language):i.datatype.value!==o&&(u+="^^<"+i.datatype.value+">")),"NamedNode"===a.termType?u+=" <"+a.value+">":"BlankNode"===a.termType&&(u+=" "+a.value),u+=" .\n"}static legacyDatasetToQuads(e){const t=[],n={"blank node":"BlankNode",IRI:"NamedNode",literal:"Literal"};for(const i in e){e[i].forEach(e=>{const a={};for(const t in e){const i=e[t],s={termType:n[i.type],value:i.value};"Literal"===s.termType&&(s.datatype={termType:"NamedNode"},"datatype"in i&&(s.datatype.value=i.datatype),"language"in i?("datatype"in i||(s.datatype.value=r),s.language=i.language):"datatype"in i||(s.datatype.value=o)),a[t]=s}a.graph="@default"===i?{termType:"DefaultGraph",value:""}:{termType:i.startsWith("_:")?"BlankNode":"NamedNode",value:i},t.push(a)})}return t}};const s=/["\\\n\r]/g;const u=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},function(e,t,n){"use strict";const{callbackify:r,normalizeDocumentLoader:o}=n(0);e.exports=class{constructor(){this._requests={},this.add=r(this.add.bind(this))}wrapLoader(e){const t=this;return t._loader=o(e),function(){return t.add.apply(t,arguments)}}async add(e){const t=this;let n=t._requests[e];if(n)return Promise.resolve(n);n=t._requests[e]=t._loader(e);try{return await n}finally{delete t._requests[e]}}}},function(e,t,n){(function(t,r){
/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2017 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
const o=n(12),i=n(0),a=i.IdentifierIssuer,s=n(3),u=n(37),l=n(38),{expand:c}=n(40),{flatten:f}=n(42),{fromRDF:d}=n(43),{toRDF:h}=n(44),{frameMergedOrDefault:p}=n(45),{isArray:g,isObject:y,isString:v}=n(1),{isSubjectReference:m}=n(2),{getInitialContext:b,process:w,getAllContexts:x,expandIri:I}=n(5),{compact:S,compactIri:A,removePreserve:T}=n(46),{createNodeMap:C,createMergedNodeMap:j,mergeNodeMaps:N}=n(11),L=void 0!==t&&t.versions&&t.versions.node,E=!L&&("undefined"!=typeof window||"undefined"!=typeof self),B=function(e){e.compact=i.callbackify(async function(t,n,r){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===n)throw new s("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===t)return null;let o;(r=I(r,{base:v(t)?t:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new a("_:b")})).link&&(r.skipExpansion=!0),r.compactToRelative||delete r.base,o=r.skipExpansion?t:await e.expand(t,r);const u=await e.processContext(b(r),n,r);let l=S({activeCtx:u,element:o,options:r,compactionMap:r.compactionMap});r.compactArrays&&!r.graph&&g(l)?1===l.length?l=l[0]:0===l.length&&(l={}):r.graph&&y(l)&&(l=[l]),y(n)&&"@context"in n&&(n=n["@context"]),n=i.clone(n),g(n)||(n=[n]);const c=n;n=[];for(let e=0;e<c.length;++e)(!y(c[e])||Object.keys(c[e]).length>0)&&n.push(c[e]);const f=n.length>0;if(1===n.length&&(n=n[0]),g(l)){const e=A({activeCtx:u,iri:"@graph",relativeTo:{vocab:!0}}),t=l;l={},f&&(l["@context"]=n),l[e]=t}else if(y(l)&&f){const e=l;l={"@context":n};for(let t in e)l[t]=e[t]}if(r.framing){const e=A({activeCtx:u,iri:"@graph",relativeTo:{vocab:!0}});
// remove @preserve from results
r.link={},l[e]=T(u,l[e],r)}return l}),e.expand=i.callbackify(async function(t,n){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");!1===(n=I(n,{keepFreeFloatingNodes:!1})).expansionMap&&(n.expansionMap=void 0);const r={},o=[];if("expandContext"in n){const e=i.clone(n.expandContext);y(e)&&"@context"in e?r.expandContext=e:r.expandContext={"@context":e},o.push(r.expandContext)}let a;if(v(t)){const i=await e.get(t,n);a=i.documentUrl,r.input=i.document,i.contextUrl&&(r.remoteContext={"@context":i.contextUrl},o.push(r.remoteContext))}else r.input=i.clone(t);"base"in n||(n.base=a||""),await x(r,n);let s=b(n);o.forEach(e=>{s=w({activeCtx:s,localCtx:e,options:n})});let u=c({activeCtx:s,element:r.input,options:n,expansionMap:n.expansionMap});return y(u)&&"@graph"in u&&1===Object.keys(u).length?u=u["@graph"]:null===u&&(u=[]),g(u)||(u=[u]),u}),e.flatten=i.callbackify(async function(t,n,r){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");n="function"==typeof n?null:n||null,r=I(r,{base:v(t)?t:""});const o=await e.expand(t,r),i=f(o);return null===n?i:(r.graph=!0,r.skipExpansion=!0,await e.compact(i,n,r))}),e.frame=i.callbackify(async function(t,n,r){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(r=I(r,{base:v(t)?t:"",embed:"@last",explicit:!1,requireAll:!0,omitDefault:!1,pruneBlankNodeIdentifiers:!0,bnodesToClear:[]}),v(n)){const t=await e.get(n,r);if(n=t.document,t.contextUrl){let e=n["@context"];e?g(e)?e.push(t.contextUrl):e=[e,t.contextUrl]:e=t.contextUrl,n["@context"]=e}}let o=n&&n["@context"]||{};const a=await e.expand(t,r),s=i.clone(r);s.isFrame=!0,s.keepFreeFloatingNodes=!0;const u=await e.expand(n,s);let l;return s.merged=!("@graph"in n),l=p(a,u,s),s.graph=!0,s.skipExpansion=!0,s.link={},s.framing=!0,await e.compact(l,o,s)}),e.link=i.callbackify(async function(t,n,r){const o={};return n&&(o["@context"]=n),o["@embed"]="@link",e.frame(t,o,r)}),e.normalize=e.canonize=i.callbackify(async function(t,n){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(n=I(n,{base:v(t)?t:"",algorithm:"URDNA2015",skipExpansion:!1}))){if("application/n-quads"!==n.inputFormat&&"application/nquads"!==n.inputFormat)throw new s("Unknown canonicalization input format.","jsonld.CanonizeError");const e=u.parse(t);return o.canonize(e,n)}const r=i.clone(n);delete r.format,r.produceGeneralizedRdf=!1;const a=await e.toRDF(t,r);return o.canonize(a,n)}),e.fromRDF=i.callbackify(async function(e,n){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");n=I(n,{format:v(e)?"application/n-quads":void 0});let r,{format:o,rdfParser:i}=n;if(o){if(!(i=i||t[o]))throw new s("Unknown input format.","jsonld.UnknownFormat",{format:o})}else i=(()=>e);return r=i.length>1?new Promise((t,n)=>{i(e,(e,r)=>{e?n(e):t(r)})}):Promise.resolve(i(e)),r=await r,Array.isArray(r)||(r=u.legacyDatasetToQuads(r)),d(r,n)}),e.toRDF=i.callbackify(async function(t,n){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let r;r=(n=I(n,{base:v(t)?t:"",skipExpansion:!1})).skipExpansion?t:await e.expand(t,n);const o=h(r,n);if(n.format){if("application/n-quads"===n.format||"application/nquads"===n.format)return await u.serialize(o);throw new s("Unknown output format.","jsonld.UnknownFormat",{format:n.format})}return o}),e.createNodeMap=i.callbackify(async function(t,n){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");n=I(n,{base:v(t)?t:""});const r=await e.expand(t,n);return j(r,n)}),e.merge=i.callbackify(async function(t,n,r){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!g(t))throw new TypeError('Could not merge, "docs" must be an array.');n="function"==typeof n?null:n||null,r=I(r,{});const o=await Promise.all(t.map(t=>{const n=Object.assign({},r);return e.expand(t,n)}));let s=!0;"mergeNodes"in r&&(s=r.mergeNodes);const u=r.issuer||new a("_:b"),l={"@default":{}};for(let e=0;e<o.length;++e){const t=i.relabelBlankNodes(o[e],{issuer:new a("_:b"+e+"-")}),n=s||0===e?l:{"@default":{}};if(C(t,n,"@default",u),n!==l)for(let e in n){const t=n[e];if(!(e in l)){l[e]=t;continue}const r=l[e];for(let e in t)e in r||(r[e]=t[e])}}const c=N(l),f=[],d=Object.keys(c).sort();for(let e=0;e<d.length;++e){const t=c[d[e]];m(t)||f.push(t)}return null===n?f:(r.graph=!0,r.skipExpansion=!0,await e.compact(f,n,r))}),Object.defineProperty(e,"documentLoader",{get:()=>e._documentLoader,set:t=>e._documentLoader=i.normalizeDocumentLoader(t)}),e.documentLoader=(async e=>{throw new s("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:e})}),e.loadDocument=i.callbackify(async function(){return e.documentLoader.apply(null,arguments)}),e.get=i.callbackify(async function(t,n){let r;r="function"==typeof n.documentLoader?i.normalizeDocumentLoader(n.documentLoader):e.documentLoader;const o=await r(t);try{if(!o.document)throw new s("No remote document found at the given URL.","jsonld.NullRemoteDocument");v(o.document)&&(o.document=JSON.parse(o.document))}catch(e){throw new s("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:o})}return o}),e.processContext=i.callbackify(async function(e,t,n){if(n=I(n,{base:""}),null===t)return b(n);t=i.clone(t),y(t)&&"@context"in t||(t={"@context":t});let r=await x(t,n);return w({activeCtx:e,localCtx:r,options:n})}),e.getContextValue=n(5).getContextValue,e.documentLoaders={},e.documentLoaders.node=n(47),e.documentLoaders.xhr=n(50),e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new s('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))};const t={};function I(t,{documentLoader:n=e.documentLoader,...r}){return"function"==typeof t&&(t={}),t=t||{},Object.assign({},{documentLoader:n},r,t)}return e.registerRDFParser=function(e,n){t[e]=n},e.unregisterRDFParser=function(e){delete t[e]},e.registerRDFParser("application/n-quads",u.parse),e.registerRDFParser("application/nquads",u.parse),e.registerRDFParser("rdfa-api",l.parse),e.url=n(9),e.util=i,Object.assign(e,i),e.promises=e,e.RequestQueue=n(17),e.JsonLdProcessor=n(51)(e),E&&void 0===r.JsonLdProcessor&&Object.defineProperty(r,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:e.JsonLdProcessor}),L?e.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&e.useDocumentLoader("xhr"),e},k=function(){return B(function(){return k()})};B(k),e.exports=k}).call(this,n(6),n(10))},function(e,t,n){"use strict";const r=n(27),o=n(14),i=n(20),a=n(23),s=n(16),u=n(4),l={subject:"s",object:"o",graph:"g"};e.exports=class extends r{constructor(e){super(e=e||{}),this.name="URDNA2015",this.options=Object.assign({},e),this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new o("_:c14n"),this.hashAlgorithm="sha256",this.quads}main(e,t){const n=this;let r;n.schedule.start=Date.now(),n.quads=e;const i={};n.waterfall([t=>{n.forEach(e,(e,t,r)=>{n.forEachComponent(e,t=>{if("BlankNode"!==t.termType)return;const r=t.value;r in n.blankNodeInfo?n.blankNodeInfo[r].quads.push(e):(i[r]=!0,n.blankNodeInfo[r]={quads:[e]})}),r()},t)},e=>{let t=!0;n.whilst(()=>t,e=>{t=!1,n.hashToBlankNodes={},n.waterfall([e=>{n.forEach(i,(e,t,r)=>{n.hashFirstDegreeQuads(t,(e,o)=>{if(e)return r(e);o in n.hashToBlankNodes?n.hashToBlankNodes[o].push(t):n.hashToBlankNodes[o]=[t],r()})},e)},e=>{const r=Object.keys(n.hashToBlankNodes).sort();n.forEach(r,(e,r,o)=>{const a=n.hashToBlankNodes[e];if(a.length>1)return o();const s=a[0];n.canonicalIssuer.getId(s),delete i[s],delete n.hashToBlankNodes[e],t=!0,o()},e)}],e)},e)},e=>{const t=Object.keys(n.hashToBlankNodes).sort();n.forEach(t,(e,t,r)=>{const i=[],a=n.hashToBlankNodes[e];n.waterfall([e=>{n.forEach(a,(e,t,r)=>{if(n.canonicalIssuer.hasId(e))return r();const a=new o("_:b");a.getId(e),n.hashNDegreeQuads(e,a,(e,t)=>{if(e)return r(e);i.push(t),r()})},e)},e=>{i.sort((e,t)=>e.hash<t.hash?-1:e.hash>t.hash?1:0),n.forEach(i,(e,t,r)=>{for(let t in e.issuer.existing)n.canonicalIssuer.getId(t);r()},e)}],r)},e)},e=>{const t=[];n.waterfall([e=>{n.forEach(n.quads,(e,r,o)=>{n.forEachComponent(e,e=>{"BlankNode"!==e.termType||e.value.startsWith(n.canonicalIssuer.prefix)||(e.value=n.canonicalIssuer.getId(e.value))}),t.push(s.serializeQuad(e)),o()},e)},e=>(t.sort(),r=t.join(""),e())],e)}],e=>t(e,r))}hashFirstDegreeQuads(e,t){const n=this,r=n.blankNodeInfo[e];if("hash"in r)return t(null,r.hash);const o=[],a=r.quads;n.forEach(a,(t,r,i)=>{const a={predicate:t.predicate};n.forEachComponent(t,(t,r)=>{a[r]=n.modifyFirstDegreeComponent(e,t,r)}),o.push(s.serializeQuad(a)),i()},e=>{if(e)return t(e);o.sort();const a=new i(n.hashAlgorithm);for(let e=0;e<o.length;++e)a.update(o[e]);r.hash=a.digest(),t(null,r.hash)})}hashRelatedBlankNode(e,t,n,r,o){const a=this;let s;a.waterfall([t=>a.canonicalIssuer.hasId(e)?(s=a.canonicalIssuer.getId(e),t()):n.hasId(e)?(s=n.getId(e),t()):void a.hashFirstDegreeQuads(e,(e,n)=>{if(e)return t(e);s=n,t()})],e=>{if(e)return o(e);const n=new i(a.hashAlgorithm);return n.update(r),"g"!==r&&n.update(a.getRelatedPredicate(t)),n.update(s),o(null,n.digest())})}hashNDegreeQuads(e,t,n){const r=this;let o;const s=new i(r.hashAlgorithm);r.waterfall([n=>r.createHashToRelated(e,t,(e,t)=>{if(e)return n(e);o=t,n()}),e=>{const n=Object.keys(o).sort();r.forEach(n,(e,n,i)=>{s.update(e);let u,l="";const c=new a(o[e]);r.whilst(()=>c.hasNext(),e=>{const n=c.next();let o=t.clone(),i="";const a=[];r.waterfall([t=>{r.forEach(n,(t,n,s)=>{if(r.canonicalIssuer.hasId(t)?i+=r.canonicalIssuer.getId(t):(o.hasId(t)||a.push(t),i+=o.getId(t)),0!==l.length&&i.length>=l.length&&i>l)return e();s()},t)},t=>{r.forEach(a,(t,n,a)=>{r.hashNDegreeQuads(t,o,(n,r)=>n?a(n):(i+=o.getId(t),i+="<"+r.hash+">",o=r.issuer,0!==l.length&&i.length>=l.length&&i>l?e():void a()))},t)},e=>{(0===l.length||i<l)&&(l=i,u=o),e()}],e)},e=>{if(e)return i(e);s.update(l),t=u,i()})},e)}],e=>{n(e,{hash:s.digest(),issuer:t})})}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:((t=u.clone(t)).value=t.value===e?"_:a":"_:z",t)}getRelatedPredicate(e){return"<"+e.predicate.value+">"}createHashToRelated(e,t,n){const r=this,o={},i=r.blankNodeInfo[e].quads;r.forEach(i,(n,i,a)=>{r.forEach(n,(i,a,s)=>{if("predicate"===a||"BlankNode"!==i.termType||i.value===e)return s();const u=i.value,c=l[a];r.hashRelatedBlankNode(u,n,t,c,(e,t)=>{if(e)return s(e);t in o?o[t].push(u):o[t]=[u],s()})},a)},e=>n(e,o))}forEachComponent(e,t){for(let n in e)"predicate"!==n&&t(e[n],n,e)}}},function(e,t,n){"use strict";const r=n(7);n(15),n(28),n(33),e.exports=class{constructor(e){this.md=r.md[e].create()}update(e){this.md.update(e,"utf8")}digest(){return this.md.digest().toHex()}}},function(e,t,n){(function(t,r,o){var i=n(7),a=n(32),s=e.exports=i.util=i.util||{};function u(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function l(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(s.isArrayBuffer(e)||s.isArrayBufferView(e))if(void 0!==o&&e instanceof o)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(e){for(var n=0;n<t.length;++n)this.putByte(t[n])}}else(e instanceof l||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if(void 0!==t&&t.nextTick&&!t.browser)return s.nextTick=t.nextTick,void(s.setImmediate="function"==typeof r?r:s.nextTick);if("function"==typeof r)return s.setImmediate=function(){return r.apply(void 0,arguments)},void(s.nextTick=function(e){return r(e)});if(s.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",n=[];s.setImmediate=function(t){n.push(t),1===n.length&&window.postMessage(e,"*")},window.addEventListener("message",function(t){if(t.source===window&&t.data===e){t.stopPropagation();var r=n.slice();n.length=0,r.forEach(function(e){e()})}},!0)}if("undefined"!=typeof MutationObserver){var o=Date.now(),i=!0,a=document.createElement("div");n=[];new MutationObserver(function(){var e=n.slice();n.length=0,e.forEach(function(e){e()})}).observe(a,{attributes:!0});var u=s.setImmediate;s.setImmediate=function(e){Date.now()-o>15?(o=Date.now(),u(e)):(n.push(e),1===n.length&&a.setAttribute("a",i=!i))}}s.nextTick=s.setImmediate}(),s.isNodejs=void 0!==t&&t.versions&&t.versions.node,s.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},s.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},s.isArrayBufferView=function(e){return e&&s.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},s.ByteBuffer=l,s.ByteStringBuffer=l;s.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},s.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},s.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},s.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},s.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var n=this.data;t>0;)1&t&&(n+=e),(t>>>=1)>0&&(e+=e);return this.data=n,this._optimizeConstructedString(t),this},s.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},s.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(s.encodeUtf8(e))},s.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},s.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},s.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},s.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},s.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},s.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},s.ByteStringBuffer.prototype.putInt=function(e,t){u(t);var n="";do{t-=8,n+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(n)},s.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},s.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},s.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},s.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},s.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},s.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},s.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},s.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},s.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},s.ByteStringBuffer.prototype.getInt=function(e){u(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},s.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},s.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},s.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},s.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},s.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},s.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},s.ByteStringBuffer.prototype.copy=function(){var e=s.createBuffer(this.data);return e.read=this.read,e},s.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},s.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},s.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},s.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);n<16&&(e+="0"),e+=n.toString(16)}return e},s.ByteStringBuffer.prototype.toString=function(){return s.decodeUtf8(this.bytes())},s.DataBuffer=function(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var n=s.isArrayBuffer(e),r=s.isArrayBufferView(e);if(n||r)return this.data=n?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},s.DataBuffer.prototype.length=function(){return this.write-this.read},s.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},s.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+t);return r.set(n),this.data=new DataView(r.buffer),this},s.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},s.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var n=0;n<t;++n)this.data.setUint8(e);return this},s.DataBuffer.prototype.putBytes=function(e,t){if(s.isArrayBufferView(e)){var n=(r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-r.byteOffset;return this.accommodate(n),new Uint8Array(this.data.buffer,this.write).set(r),this.write+=n,this}if(s.isArrayBuffer(e)){var r=new Uint8Array(e);return this.accommodate(r.byteLength),new Uint8Array(this.data.buffer).set(r,this.write),this.write+=r.byteLength,this}if(e instanceof s.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&s.isArrayBufferView(e.data)){r=new Uint8Array(e.data.byteLength,e.read,e.length());return this.accommodate(r.byteLength),new Uint8Array(e.data.byteLength,this.write).set(r),this.write+=r.byteLength,this}if(e instanceof s.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"==typeof e){var o;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.hex.decode(e,o,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),o=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.base64.decode(e,o,this.write),this;if("utf8"===t&&(e=s.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=s.binary.raw.decode(o),this;if("utf16"===t)return this.accommodate(2*e.length),o=new Uint16Array(this.data.buffer,this.write),this.write+=s.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},s.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},s.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},s.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},s.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},s.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},s.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},s.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},s.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},s.DataBuffer.prototype.putInt=function(e,t){u(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},s.DataBuffer.prototype.putSignedInt=function(e,t){return u(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},s.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},s.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},s.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},s.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},s.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},s.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},s.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},s.DataBuffer.prototype.getInt=function(e){u(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},s.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t},s.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},s.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},s.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},s.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},s.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},s.DataBuffer.prototype.copy=function(){return new s.DataBuffer(this)},s.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},s.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},s.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},s.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var n=this.data.getUint8(t);n<16&&(e+="0"),e+=n.toString(16)}return e},s.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return s.binary.raw.encode(t);if("hex"===e)return s.binary.hex.encode(t);if("base64"===e)return s.binary.base64.encode(t);if("utf8"===e)return s.text.utf8.decode(t);if("utf16"===e)return s.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},s.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=s.encodeUtf8(e)),new s.ByteBuffer(e)},s.fillString=function(e,t){for(var n="";t>0;)1&t&&(n+=e),(t>>>=1)>0&&(e+=e);return n},s.xorBytes=function(e,t,n){for(var r="",o="",i="",a=0,s=0;n>0;--n,++a)o=e.charCodeAt(a)^t.charCodeAt(a),s>=10&&(r+=i,i="",s=0),i+=String.fromCharCode(o),++s;return r+=i},s.hexToBytes=function(e){var t="",n=0;for(!0&e.length&&(n=1,t+=String.fromCharCode(parseInt(e[0],16)));n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t},s.bytesToHex=function(e){return s.createBuffer(e).toHex()},s.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],d="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";s.encode64=function(e,t){for(var n,r,o,i="",a="",s=0;s<e.length;)n=e.charCodeAt(s++),r=e.charCodeAt(s++),o=e.charCodeAt(s++),i+=c.charAt(n>>2),i+=c.charAt((3&n)<<4|r>>4),isNaN(r)?i+="==":(i+=c.charAt((15&r)<<2|o>>6),i+=isNaN(o)?"=":c.charAt(63&o)),t&&i.length>t&&(a+=i.substr(0,t)+"\r\n",i=i.substr(t));return a+=i},s.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,n,r,o,i="",a=0;a<e.length;)t=f[e.charCodeAt(a++)-43],n=f[e.charCodeAt(a++)-43],r=f[e.charCodeAt(a++)-43],o=f[e.charCodeAt(a++)-43],i+=String.fromCharCode(t<<2|n>>4),64!==r&&(i+=String.fromCharCode((15&n)<<4|r>>2),64!==o&&(i+=String.fromCharCode((3&r)<<6|o)));return i},s.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},s.decodeUtf8=function(e){return decodeURIComponent(escape(e))},s.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:a.encode,decode:a.decode}},s.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},s.binary.raw.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length));for(var o=n=n||0,i=0;i<e.length;++i)r[o++]=e.charCodeAt(i);return t?o-n:r},s.binary.hex.encode=s.bytesToHex,s.binary.hex.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/2)));var o=0,i=n=n||0;for(1&e.length&&(o=1,r[i++]=parseInt(e[0],16));o<e.length;o+=2)r[i++]=parseInt(e.substr(o,2),16);return t?i-n:r},s.binary.base64.encode=function(e,t){for(var n,r,o,i="",a="",s=0;s<e.byteLength;)n=e[s++],r=e[s++],o=e[s++],i+=c.charAt(n>>2),i+=c.charAt((3&n)<<4|r>>4),isNaN(r)?i+="==":(i+=c.charAt((15&r)<<2|o>>6),i+=isNaN(o)?"=":c.charAt(63&o)),t&&i.length>t&&(a+=i.substr(0,t)+"\r\n",i=i.substr(t));return a+=i},s.binary.base64.decode=function(e,t,n){var r,o,i,a,s=t;s||(s=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,l=n=n||0;u<e.length;)r=f[e.charCodeAt(u++)-43],o=f[e.charCodeAt(u++)-43],i=f[e.charCodeAt(u++)-43],a=f[e.charCodeAt(u++)-43],s[l++]=r<<2|o>>4,64!==i&&(s[l++]=(15&o)<<4|i>>2,64!==a&&(s[l++]=(3&i)<<6|a));return t?l-n:s.subarray(0,l)},s.binary.base58.encode=function(e,t){return s.binary.baseN.encode(e,d,t)},s.binary.base58.decode=function(e,t){return s.binary.baseN.decode(e,d,t)},s.text={utf8:{},utf16:{}},s.text.utf8.encode=function(e,t,n){e=s.encodeUtf8(e);var r=t;r||(r=new Uint8Array(e.length));for(var o=n=n||0,i=0;i<e.length;++i)r[o++]=e.charCodeAt(i);return t?o-n:r},s.text.utf8.decode=function(e){return s.decodeUtf8(String.fromCharCode.apply(null,e))},s.text.utf16.encode=function(e,t,n){var r=t;r||(r=new Uint8Array(2*e.length));for(var o=new Uint16Array(r.buffer),i=n=n||0,a=n,s=0;s<e.length;++s)o[a++]=e.charCodeAt(s),i+=2;return t?i-n:r},s.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},s.deflate=function(e,t,n){if(t=s.decode64(e.deflate(s.encode64(t)).rval),n){var r=2;32&t.charCodeAt(1)&&(r=6),t=t.substring(r,t.length-4)}return t},s.inflate=function(e,t,n){var r=e.inflate(s.encode64(t)).rval;return null===r?null:s.decode64(r)};var h=function(e,t,n){if(!e)throw new Error("WebStorage not available.");var r;if(null===n?r=e.removeItem(t):(n=s.encode64(JSON.stringify(n)),r=e.setItem(t,n)),void 0!==r&&!0!==r.rval){var o=new Error(r.error.message);throw o.id=r.error.id,o.name=r.error.name,o}},p=function(e,t){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(t);if(e.init)if(null===n.rval){if(n.error){var r=new Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return null!==n&&(n=JSON.parse(s.decode64(n))),n},g=function(e,t,n,r){var o=p(e,t);null===o&&(o={}),o[n]=r,h(e,t,o)},y=function(e,t,n){var r=p(e,t);return null!==r&&(r=n in r?r[n]:null),r},v=function(e,t,n){var r=p(e,t);if(null!==r&&n in r){delete r[n];var o=!0;for(var i in r){o=!1;break}o&&(r=null),h(e,t,r)}},m=function(e,t){h(e,t,null)},b=function(e,t,n){var r,o=null;void 0===n&&(n=["web","flash"]);var i=!1,a=null;for(var s in n){r=n[s];try{if("flash"===r||"both"===r){if(null===t[0])throw new Error("Flash local storage not available.");o=e.apply(this,t),i="flash"===r}"web"!==r&&"both"!==r||(t[0]=localStorage,o=e.apply(this,t),i=!0)}catch(e){a=e}if(i)break}if(!i)throw a;return o};s.setItem=function(e,t,n,r,o){b(g,arguments,o)},s.getItem=function(e,t,n,r){return b(y,arguments,r)},s.removeItem=function(e,t,n,r){b(v,arguments,r)},s.clearItems=function(e,t,n){b(m,arguments,n)},s.parseUrl=function(e){var t=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;t.lastIndex=0;var n=t.exec(e),r=null===n?null:{full:e,scheme:n[1],host:n[2],port:n[3],path:n[4]};return r&&(r.fullHost=r.host,r.port?80!==r.port&&"http"===r.scheme?r.fullHost+=":"+r.port:443!==r.port&&"https"===r.scheme&&(r.fullHost+=":"+r.port):"http"===r.scheme?r.port=80:"https"===r.scheme&&(r.port=443),r.full=r.scheme+"://"+r.fullHost),r};var w=null;s.getQueryVariables=function(e){var t,n=function(e){for(var t={},n=e.split("&"),r=0;r<n.length;r++){var o,i,a=n[r].indexOf("=");a>0?(o=n[r].substring(0,a),i=n[r].substring(a+1)):(o=n[r],i=null),o in t||(t[o]=[]),o in Object.prototype||null===i||t[o].push(unescape(i))}return t};return void 0===e?(null===w&&(w="undefined"!=typeof window&&window.location&&window.location.search?n(window.location.search.substring(1)):{}),t=w):t=n(e),t},s.parseFragment=function(e){var t=e,n="",r=e.indexOf("?");r>0&&(t=e.substring(0,r),n=e.substring(r+1));var o=t.split("/");return o.length>0&&""===o[0]&&o.shift(),{pathString:t,queryString:n,path:o,query:""===n?{}:s.getQueryVariables(n)}},s.makeRequest=function(e){var t=s.parseFragment(e),n={path:t.pathString,query:t.queryString,getPath:function(e){return void 0===e?t.path:t.path[e]},getQuery:function(e,n){var r;return void 0===e?r=t.query:(r=t.query[e])&&void 0!==n&&(r=r[n]),r},getQueryLast:function(e,t){var r=n.getQuery(e);return r?r[r.length-1]:t}};return n},s.makeLink=function(e,t,n){e=jQuery.isArray(e)?e.join("/"):e;var r=jQuery.param(t||{});return n=n||"",e+(r.length>0?"?"+r:"")+(n.length>0?"#"+n:"")},s.setPath=function(e,t,n){if("object"==typeof e&&null!==e)for(var r=0,o=t.length;r<o;){var i=t[r++];if(r==o)e[i]=n;else{var a=i in e;(!a||a&&"object"!=typeof e[i]||a&&null===e[i])&&(e[i]={}),e=e[i]}}},s.getPath=function(e,t,n){for(var r=0,o=t.length,i=!0;i&&r<o&&"object"==typeof e&&null!==e;){var a=t[r++];(i=a in e)&&(e=e[a])}return i?e:n},s.deletePath=function(e,t){if("object"==typeof e&&null!==e)for(var n=0,r=t.length;n<r;){var o=t[n++];if(n==r)delete e[o];else{if(!(o in e)||"object"!=typeof e[o]||null===e[o])break;e=e[o]}}},s.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},s.format=function(e){for(var t,n,r=/%./g,o=0,i=[],a=0;t=r.exec(e);){(n=e.substring(a,r.lastIndex-2)).length>0&&i.push(n),a=r.lastIndex;var s=t[0][1];switch(s){case"s":case"o":o<arguments.length?i.push(arguments[1+o++]):i.push("<?>");break;case"%":i.push("%");break;default:i.push("<%"+s+"?>")}}return i.push(e.substring(a)),i.join("")},s.formatNumber=function(e,t,n,r){var o=e,i=isNaN(t=Math.abs(t))?2:t,a=void 0===n?",":n,s=void 0===r?".":r,u=o<0?"-":"",l=parseInt(o=Math.abs(+o||0).toFixed(i),10)+"",c=l.length>3?l.length%3:0;return u+(c?l.substr(0,c)+s:"")+l.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+s)+(i?a+Math.abs(o-l).toFixed(i).slice(2):"")},s.formatSize=function(e){return e=e>=1073741824?s.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?s.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?s.formatNumber(e/1024,0)+" KiB":s.formatNumber(e,0)+" bytes"},s.bytesFromIP=function(e){return-1!==e.indexOf(".")?s.bytesFromIPv4(e):-1!==e.indexOf(":")?s.bytesFromIPv6(e):null},s.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var t=s.createBuffer(),n=0;n<e.length;++n){var r=parseInt(e[n],10);if(isNaN(r))return null;t.putByte(r)}return t.getBytes()},s.bytesFromIPv6=function(e){for(var t=0,n=2*(8-(e=e.split(":").filter(function(e){return 0===e.length&&++t,!0})).length+t),r=s.createBuffer(),o=0;o<8;++o)if(e[o]&&0!==e[o].length){var i=s.hexToBytes(e[o]);i.length<2&&r.putByte(0),r.putBytes(i)}else r.fillWithByte(0,n),n=0;return r.getBytes()},s.bytesToIP=function(e){return 4===e.length?s.bytesToIPv4(e):16===e.length?s.bytesToIPv6(e):null},s.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t.join(".")},s.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],n=[],r=0,o=0;o<e.length;o+=2){for(var i=s.bytesToHex(e[o]+e[o+1]);"0"===i[0]&&"0"!==i;)i=i.substr(1);if("0"===i){var a=n[n.length-1],u=t.length;a&&u===a.end+1?(a.end=u,a.end-a.start>n[r].end-n[r].start&&(r=n.length-1)):n.push({start:u,end:u})}t.push(i)}if(n.length>0){var l=n[r];l.end-l.start>0&&(t.splice(l.start,l.end-l.start+1,""),0===l.start&&t.unshift(""),7===l.end&&t.push(""))}return t.join(":")},s.estimateCores=function(e,t){if("function"==typeof e&&(t=e,e={}),e=e||{},"cores"in s&&!e.update)return t(null,s.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return s.cores=navigator.hardwareConcurrency,t(null,s.cores);if("undefined"==typeof Worker)return s.cores=1,t(null,s.cores);if("undefined"==typeof Blob)return s.cores=2,t(null,s.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(e){for(var t=Date.now(),n=t+4;Date.now()<n;);self.postMessage({st:t,et:n})})}.toString(),")()"],{type:"application/javascript"}));!function e(r,o,i){if(0===o){var a=Math.floor(r.reduce(function(e,t){return e+t},0)/r.length);return s.cores=Math.max(1,a),URL.revokeObjectURL(n),t(null,s.cores)}!function(e,t){for(var r=[],o=[],i=0;i<e;++i){var a=new Worker(n);a.addEventListener("message",function(n){if(o.push(n.data),o.length===e){for(var i=0;i<e;++i)r[i].terminate();t(null,o)}}),r.push(a)}for(var i=0;i<e;++i)r[i].postMessage(i)}(i,function(t,n){r.push(function(e,t){for(var n=[],r=0;r<e;++r)for(var o=t[r],i=n[r]=[],a=0;a<e;++a)if(r!==a){var s=t[a];(o.st>s.st&&o.st<s.et||s.st>o.st&&s.st<o.et)&&i.push(a)}return n.reduce(function(e,t){return Math.max(e,t.length)},0)}(i,n)),e(r,o-1,i)})}([],5,16)}}).call(this,n(6),n(13).setImmediate,n(22).Buffer)},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(29),o=n(30),i=n(31);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=d(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),o=(e=s(e,r)).write(t,n);o!==r&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|h(t.length);return 0===(e=s(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):d(e,t);if("Buffer"===t.type&&i(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(c(t),e=s(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|h(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return F(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,o);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,o){var i,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var c=-1;for(i=n;i<s;i++)if(l(e,i)===l(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===u)return c*a}else-1!==c&&(i-=i-c),c=-1}else for(n+u>s&&(n=s-u),i=n;i>=0;i--){for(var f=!0,d=0;d<u;d++)if(l(e,i+d)!==l(t,d)){f=!1;break}if(f)return i}return-1}function m(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function b(e,t,n,r){return J(F(t,e.length-n),e,n,r)}function w(e,t,n,r){return J(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function x(e,t,n,r){return w(e,t,n,r)}function I(e,t,n,r){return J(z(t),e,n,r)}function S(e,t,n,r){return J(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function T(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,s,u,l=e[o],c=null,f=l>239?4:l>223?3:l>191?2:1;if(o+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(i=e[o+1]))&&(u=(31&l)<<6|63&i)>127&&(c=u);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(u=(15&l)<<12|(63&i)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),o+=f}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return l(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return L(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return j(this,t,n);case"latin1":case"binary":return N(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,o){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(i,a),l=this.slice(r,o),c=e.slice(t,n),f=0;f<s;++f)if(l[f]!==c[f]){i=l[f],a=c[f];break}return i<a?-1:a<i?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return x(this,e,t,n);case"base64":return I(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function j(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function N(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function L(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=U(e[i]);return o}function E(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function B(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,n,r,o,i){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function D(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function _(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,i){return i||_(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function M(e,t,n,r,i){return i||_(e,0,n,8),o.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var o=t-e;n=new u(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},u.prototype.readUInt8=function(e,t){return t||B(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||B(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||B(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||B(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readInt8=function(e,t){return t||B(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||B(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||B(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||B(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||B(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||B(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||B(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||k(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||k(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);k(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);k(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=u.isBuffer(e)?e:F(new u(e,r).toString()),s=a.length;for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};var P=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function z(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(P,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function J(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(10))},function(e,t,n){"use strict";e.exports=class{constructor(e){this.list=e.sort(),this.done=!1,this.left={};for(let t=0;t<e.length;++t)this.left[e[t]]=!0}hasNext(){return!this.done}next(){const e=this.list.slice();let t=null,n=0;const r=this.list.length;for(let e=0;e<r;++e){const o=this.list[e],i=this.left[o];(null===t||o>t)&&(i&&e>0&&o>this.list[e-1]||!i&&e<r-1&&o>this.list[e+1])&&(t=o,n=e)}if(null===t)this.done=!0;else{const e=this.left[t]?n-1:n+1;this.list[n]=this.list[e],this.list[e]=t;for(let e=0;e<r;++e)this.list[e]>t&&(this.left[this.list[e]]=!this.left[this.list[e]])}return e}}},function(e,t,n){"use strict";const r=n(14),o=n(20),i=n(23),a=n(16),s=n(4),u={subject:"s",object:"o",graph:"g"};e.exports=class{constructor(){this.name="URDNA2015",this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new r("_:c14n"),this.hashAlgorithm="sha256",this.quads}main(e){const t=this;t.quads=e;const n={};for(const r of e)t.forEachComponent(r,e=>{if("BlankNode"!==e.termType)return;const o=e.value;o in t.blankNodeInfo?t.blankNodeInfo[o].quads.push(r):(n[o]=!0,t.blankNodeInfo[o]={quads:[r]})});let o=!0;for(;o;){o=!1,t.hashToBlankNodes={};for(let e in n){const n=t.hashFirstDegreeQuads(e);n in t.hashToBlankNodes?t.hashToBlankNodes[n].push(e):t.hashToBlankNodes[n]=[e]}const e=Object.keys(t.hashToBlankNodes).sort();for(let r=0;r<e.length;++r){const i=e[r],a=t.hashToBlankNodes[i];if(a.length>1)continue;const s=a[0];t.canonicalIssuer.getId(s),delete n[s],delete t.hashToBlankNodes[i],o=!0}}const i=Object.keys(t.hashToBlankNodes).sort();for(let e=0;e<i.length;++e){const n=[],o=i[e],a=t.hashToBlankNodes[o];for(let e=0;e<a.length;++e){const o=a[e];if(t.canonicalIssuer.hasId(o))continue;const i=new r("_:b");i.getId(o);const s=t.hashNDegreeQuads(o,i);n.push(s)}n.sort((e,t)=>e.hash<t.hash?-1:e.hash>t.hash?1:0);for(let e=0;e<n.length;++e){const r=n[e];for(let e in r.issuer.existing)t.canonicalIssuer.getId(e)}}const s=[];for(let e=0;e<t.quads.length;++e){const n=t.quads[e];t.forEachComponent(n,e=>{"BlankNode"!==e.termType||e.value.startsWith(t.canonicalIssuer.prefix)||(e.value=t.canonicalIssuer.getId(e.value))}),s.push(a.serializeQuad(n))}return s.sort(),s.join("")}hashFirstDegreeQuads(e){const t=this,n=t.blankNodeInfo[e];if("hash"in n)return n.hash;const r=[],i=n.quads;for(let n=0;n<i.length;++n){const o=i[n],s={predicate:o.predicate};t.forEachComponent(o,(n,r)=>{s[r]=t.modifyFirstDegreeComponent(e,n,r)}),r.push(a.serializeQuad(s))}r.sort();const s=new o(t.hashAlgorithm);for(let e=0;e<r.length;++e)s.update(r[e]);return n.hash=s.digest(),n.hash}hashRelatedBlankNode(e,t,n,r){const i=this;let a;a=i.canonicalIssuer.hasId(e)?i.canonicalIssuer.getId(e):n.hasId(e)?n.getId(e):i.hashFirstDegreeQuads(e);const s=new o(i.hashAlgorithm);return s.update(r),"g"!==r&&s.update(i.getRelatedPredicate(t)),s.update(a),s.digest()}hashNDegreeQuads(e,t){const n=this,r=new o(n.hashAlgorithm),a=n.createHashToRelated(e,t),s=Object.keys(a).sort();for(let e=0;e<s.length;++e){const o=s[e];r.update(o);let u,l="";const c=new i(a[o]);for(;c.hasNext();){const e=c.next();let r=t.clone(),o="";const i=[];let a=!1;for(let t=0;t<e.length;++t){const s=e[t];if(n.canonicalIssuer.hasId(s)?o+=n.canonicalIssuer.getId(s):(r.hasId(s)||i.push(s),o+=r.getId(s)),0!==l.length&&o.length>=l.length&&o>l){a=!0;break}}if(!a){for(let e=0;e<i.length;++e){const t=i[e],s=n.hashNDegreeQuads(t,r);if(o+=r.getId(t),o+="<"+s.hash+">",r=s.issuer,0!==l.length&&o.length>=l.length&&o>l){a=!0;break}}a||(0===l.length||o<l)&&(l=o,u=r)}}r.update(l),t=u}return{hash:r.digest(),issuer:t}}modifyFirstDegreeComponent(e,t){return"BlankNode"!==t.termType?t:((t=s.clone(t)).value=t.value===e?"_:a":"_:z",t)}getRelatedPredicate(e){return"<"+e.predicate.value+">"}createHashToRelated(e,t){const n=this,r={},o=n.blankNodeInfo[e].quads;for(let i=0;i<o.length;++i){const a=o[i];for(let o in a){const i=a[o];if("predicate"===o||"BlankNode"!==i.termType||i.value===e)continue;const s=i.value,l=u[o],c=n.hashRelatedBlankNode(s,a,t,l);c in r?r[c].push(s):r[c]=[s]}}return r}forEachComponent(e,t){for(let n in e)"predicate"!==n&&t(e[n],n,e)}}},function(e,t,n){"use strict";n.r(t);var r=n(18),o=n.n(r),i=n(52);n(53);L.VectorGrid.RoutableTiles=L.VectorGrid.extend({options:{subdomains:"abc",fetchOptions:{}},initialize:function(e,t){this._url=e,L.VectorGrid.prototype.initialize.call(this,t)},setUrl:function(e,t){return this._url=e,t||this.redraw(),this},_getSubdomain:L.TileLayer.prototype._getSubdomain,_isCurrentTile:function(e,t){if(!this._map)return!0;var n=(this._map._animatingZoom?this._map._animateToZoom:this._map._zoom)===e.z,r=(t=this._tileCoordsToBounds(e),this._map.getBounds().overlaps(t));return n&&r},_getVectorTilePromise:function(e,t){var n={s:this._getSubdomain(e),x:e.x,y:e.y,z:14};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-e.y;this.options.tms&&(n.y=r),n["-y"]=r}if(!this._isCurrentTile(e,t))return Promise.resolve({layers:[]});var a=L.Util.template(this._url,L.extend(n,this.options));return o.a.promises.compact(a,{tiles:"https://w3id.org/tree/terms#",hydra:"http://www.w3.org/ns/hydra/core#",osm:"https://w3id.org/openstreetmap/terms#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",dcterms:"http://purl.org/dc/terms/","dcterms:license":{"@type":"@id"},"hydra:variableRepresentation":{"@type":"@id"},"hydra:property":{"@type":"@id"},"osm:hasNodes":{"@container":"@list","@type":"@id"},"osm:highway":{"@type":"@id"}}).then(function(t){var n=i(t);return{layers:{"Routable Tiles":{extent:4096,features:geojsonvt(n).getTile(14,e.x,e.y).features.map(e=>({type:e.type,geometry:e.geometry,id:e.id,properties:e.tags})),name:"Routable Tiles",length:n.length}}}})}}),L.vectorGrid.routableTiles=function(e,t){return new L.VectorGrid.RoutableTiles(e,t)}},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,o,i,a,s,u=1,l={},c=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){p(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){i.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return l[u]=o,r(u),u++},d.clearImmediate=h}function h(e){delete l[e]}function p(e){if(c)setTimeout(p,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(10),n(6))},function(e,t,n){"use strict";const r=n(4);e.exports=class{constructor({maxCallStackDepth:e=500,maxTotalCallStackDepth:t=4294967295,timeSlice:n=10}={}){this.schedule={},this.schedule.MAX_DEPTH=e,this.schedule.MAX_TOTAL_DEPTH=t,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice=n}doWork(e,t){const n=this.schedule;if(n.totalDepth>=n.MAX_TOTAL_DEPTH)return t(new Error("Maximum total call stack depth exceeded; canonicalization aborting."));!function o(){if(n.depth===n.MAX_DEPTH)return n.depth=0,n.running=!1,r.nextTick(o);const i=Date.now();if(n.running||(n.start=Date.now(),n.deadline=n.start+n.timeSlice),i<n.deadline)return n.running=!0,n.depth++,n.totalDepth++,e((e,r)=>{n.depth--,n.totalDepth--,t(e,r)});n.depth=0,n.running=!1,r.setImmediate(o)}()}forEach(e,t,n){const r=this;let o,i,a=0;if(Array.isArray(e))i=e.length,o=(()=>a!==i&&(o.value=e[a++],o.key=a,!0));else{const t=Object.keys(e);i=t.length,o=(()=>a!==i&&(o.key=t[a++],o.value=e[o.key],!0))}!function e(i){return i?n(i):o()?r.doWork(()=>t(o.value,o.key,e)):void n()}()}waterfall(e,t){const n=this;n.forEach(e,(e,t,r)=>n.doWork(e,r),t)}whilst(e,t,n){const r=this;!function o(i){return i?n(i):e()?void r.doWork(t,o):n()}()}}},function(e,t,n){var r=n(7);n(15),n(21);var o=e.exports=r.sha1=r.sha1||{};r.md.sha1=r.md.algorithms.sha1=o,o.create=function(){a||(i=String.fromCharCode(128),i+=r.util.fillString(String.fromCharCode(0),64),a=!0);var e=null,t=r.util.createBuffer(),n=new Array(80),o={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var n=o.messageLengthSize/4,i=0;i<n;++i)o.fullMessageLength.push(0);return t=r.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},o}};return o.start(),o.update=function(i,a){"utf8"===a&&(i=r.util.encodeUtf8(i));var u=i.length;o.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var l=o.fullMessageLength.length-1;l>=0;--l)o.fullMessageLength[l]+=u[1],u[1]=u[0]+(o.fullMessageLength[l]/4294967296>>>0),o.fullMessageLength[l]=o.fullMessageLength[l]>>>0,u[0]=u[1]/4294967296>>>0;return t.putBytes(i),s(e,n,t),(t.read>2048||0===t.length())&&t.compact(),o},o.digest=function(){var a=r.util.createBuffer();a.putBytes(t.bytes());var u,l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;a.putBytes(i.substr(0,o.blockLength-l));for(var c=8*o.fullMessageLength[0],f=0;f<o.fullMessageLength.length-1;++f)c+=(u=8*o.fullMessageLength[f+1])/4294967296>>>0,a.putInt32(c>>>0),c=u>>>0;a.putInt32(c);var d={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};s(d,n,a);var h=r.util.createBuffer();return h.putInt32(d.h0),h.putInt32(d.h1),h.putInt32(d.h2),h.putInt32(d.h3),h.putInt32(d.h4),h},o};var i=null,a=!1;function s(e,t,n){for(var r,o,i,a,s,u,l,c=n.length();c>=64;){for(o=e.h0,i=e.h1,a=e.h2,s=e.h3,u=e.h4,l=0;l<16;++l)r=n.getInt32(),t[l]=r,r=(o<<5|o>>>27)+(s^i&(a^s))+u+1518500249+r,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=r;for(;l<20;++l)r=(r=t[l-3]^t[l-8]^t[l-14]^t[l-16])<<1|r>>>31,t[l]=r,r=(o<<5|o>>>27)+(s^i&(a^s))+u+1518500249+r,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=r;for(;l<32;++l)r=(r=t[l-3]^t[l-8]^t[l-14]^t[l-16])<<1|r>>>31,t[l]=r,r=(o<<5|o>>>27)+(i^a^s)+u+1859775393+r,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=r;for(;l<40;++l)r=(r=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|r>>>30,t[l]=r,r=(o<<5|o>>>27)+(i^a^s)+u+1859775393+r,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=r;for(;l<60;++l)r=(r=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|r>>>30,t[l]=r,r=(o<<5|o>>>27)+(i&a|s&(i^a))+u+2400959708+r,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=r;for(;l<80;++l)r=(r=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|r>>>30,t[l]=r,r=(o<<5|o>>>27)+(i^a^s)+u+3395469782+r,u=s,s=a,a=(i<<30|i>>>2)>>>0,i=o,o=r;e.h0=e.h0+o|0,e.h1=e.h1+i|0,e.h2=e.h2+a|0,e.h3=e.h3+s|0,e.h4=e.h4+u|0,c-=64}}},function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){for(var t,n=l(e),r=n[0],a=n[1],s=new i(function(e,t,n){return 3*(t+n)/4-n}(0,r,a)),u=0,c=a>0?r-4:r,f=0;f<c;f+=4)t=o[e.charCodeAt(f)]<<18|o[e.charCodeAt(f+1)]<<12|o[e.charCodeAt(f+2)]<<6|o[e.charCodeAt(f+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;2===a&&(t=o[e.charCodeAt(f)]<<2|o[e.charCodeAt(f+1)]>>4,s[u++]=255&t);1===a&&(t=o[e.charCodeAt(f)]<<10|o[e.charCodeAt(f+1)]<<4|o[e.charCodeAt(f+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t);return s},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=0,s=n-o;a<s;a+=16383)i.push(c(e,a,a+16383>s?s:a+16383));1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)r[s]=a[s],o[a.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var o,i,a=[],s=t;s<n;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?o-1:0,d=n?-1:1,h=e[t+f];for(f+=d,i=h&(1<<-c)-1,h>>=-c,c+=s;c>0;i=256*i+e[t+f],f+=d,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=d,c-=8);if(0===i)i=1-l;else{if(i===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=l}return(h?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,s,u,l=8*i-o-1,c=(1<<l)-1,f=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*u-1)*Math.pow(2,o),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;e[n+h]=255&s,h+=p,s/=256,o-=8);for(a=a<<o|s,l+=o;l>0;e[n+h]=255&a,h+=p,a/=256,l-=8);e[n+h-p]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(t){var n={};e.exports=n;var r={};n.encode=function(e,t,n){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==n&&"number"!=typeof n)throw new TypeError('"maxline" must be a number.');var r="";if(e instanceof Uint8Array){var o=0,i=t.length,a=t.charAt(0),s=[0];for(o=0;o<e.length;++o){for(var u=0,l=e[o];u<s.length;++u)l+=s[u]<<8,s[u]=l%i,l=l/i|0;for(;l>0;)s.push(l%i),l=l/i|0}for(o=0;0===e[o]&&o<e.length-1;++o)r+=a;for(o=s.length-1;o>=0;--o)r+=t[s[o]]}else r=function(e,t){var n=0,r=t.length,o=t.charAt(0),i=[0];for(n=0;n<e.length();++n){for(var a=0,s=e.at(n);a<i.length;++a)s+=i[a]<<8,i[a]=s%r,s=s/r|0;for(;s>0;)i.push(s%r),s=s/r|0}var u="";for(n=0;0===e.at(n)&&n<e.length()-1;++n)u+=o;for(n=i.length-1;n>=0;--n)u+=t[i[n]];return u}(e,t);if(n){var c=new RegExp(".{1,"+n+"}","g");r=r.match(c).join("\r\n")}return r},n.decode=function(e,n){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof n)throw new TypeError('"alphabet" must be a string.');var o=r[n];if(!o){o=r[n]=[];for(var i=0;i<n.length;++i)o[n.charCodeAt(i)]=i}e=e.replace(/\s/g,"");var a=n.length,s=n.charAt(0),u=[0];for(i=0;i<e.length;i++){var l=o[e.charCodeAt(i)];if(void 0===l)return;for(var c=0,f=l;c<u.length;++c)f+=u[c]*a,u[c]=255&f,f>>=8;for(;f>0;)u.push(255&f),f>>=8}for(var d=0;e[d]===s&&d<e.length-1;++d)u.push(0);return void 0!==t?t.from(u.reverse()):new Uint8Array(u.reverse())}}).call(this,n(22).Buffer)},function(e,t,n){var r=n(7);n(15),n(21);var o=e.exports=r.sha256=r.sha256||{};r.md.sha256=r.md.algorithms.sha256=o,o.create=function(){a||(i=String.fromCharCode(128),i+=r.util.fillString(String.fromCharCode(0),64),s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=!0);var e=null,t=r.util.createBuffer(),n=new Array(64),o={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){o.messageLength=0,o.fullMessageLength=o.messageLength64=[];for(var n=o.messageLengthSize/4,i=0;i<n;++i)o.fullMessageLength.push(0);return t=r.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},o}};return o.start(),o.update=function(i,a){"utf8"===a&&(i=r.util.encodeUtf8(i));var s=i.length;o.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=o.fullMessageLength.length-1;l>=0;--l)o.fullMessageLength[l]+=s[1],s[1]=s[0]+(o.fullMessageLength[l]/4294967296>>>0),o.fullMessageLength[l]=o.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),u(e,n,t),(t.read>2048||0===t.length())&&t.compact(),o},o.digest=function(){var a=r.util.createBuffer();a.putBytes(t.bytes());var s,l=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize&o.blockLength-1;a.putBytes(i.substr(0,o.blockLength-l));for(var c=8*o.fullMessageLength[0],f=0;f<o.fullMessageLength.length-1;++f)c+=(s=8*o.fullMessageLength[f+1])/4294967296>>>0,a.putInt32(c>>>0),c=s>>>0;a.putInt32(c);var d={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};u(d,n,a);var h=r.util.createBuffer();return h.putInt32(d.h0),h.putInt32(d.h1),h.putInt32(d.h2),h.putInt32(d.h3),h.putInt32(d.h4),h.putInt32(d.h5),h.putInt32(d.h6),h.putInt32(d.h7),h},o};var i=null,a=!1,s=null;function u(e,t,n){for(var r,o,i,a,u,l,c,f,d,h,p,g,y,v=n.length();v>=64;){for(u=0;u<16;++u)t[u]=n.getInt32();for(;u<64;++u)r=((r=t[u-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,o=((o=t[u-15])>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,t[u]=r+t[u-7]+o+t[u-16]|0;for(l=e.h0,c=e.h1,f=e.h2,d=e.h3,h=e.h4,p=e.h5,g=e.h6,y=e.h7,u=0;u<64;++u)i=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),a=l&c|f&(l^c),r=y+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(g^h&(p^g))+s[u]+t[u],y=g,g=p,p=h,h=d+r>>>0,d=f,f=c,c=l,l=r+(o=i+a)>>>0;e.h0=e.h0+l|0,e.h1=e.h1+c|0,e.h2=e.h2+f|0,e.h3=e.h3+d|0,e.h4=e.h4+h|0,e.h5=e.h5+p|0,e.h6=e.h6+g|0,e.h7=e.h7+y|0,v-=64}}},function(e,t,n){"use strict";const r=n(19),o=n(4);e.exports=class extends r{constructor(e){super(e),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,n){return"BlankNode"!==t.termType?t:((t=o.clone(t)).value="name"===n?"_:g":t.value===e?"_:a":"_:z",t)}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t,n){const r=this,o={},i=r.blankNodeInfo[e].quads;r.forEach(i,(n,i,a)=>{let s,u;if("BlankNode"===n.subject.termType&&n.subject.value!==e)u=n.subject.value,s="p";else{if("BlankNode"!==n.object.termType||n.object.value===e)return a();u=n.object.value,s="r"}r.hashRelatedBlankNode(u,n,t,s,(e,t)=>{if(e)return a(e);t in o?o[t].push(u):o[t]=[u],a()})},e=>n(e,o))}}},function(e,t,n){"use strict";const r=n(24),o=n(4);e.exports=class extends r{constructor(){super(),this.name="URGNA2012",this.hashAlgorithm="sha1"}modifyFirstDegreeComponent(e,t,n){return"BlankNode"!==t.termType?t:((t=o.clone(t)).value="name"===n?"_:g":t.value===e?"_:a":"_:z",t)}getRelatedPredicate(e){return e.predicate.value}createHashToRelated(e,t){const n=this,r={},o=n.blankNodeInfo[e].quads;for(let i=0;i<o.length;++i){const a=o[i];let s,u;if("BlankNode"===a.subject.termType&&a.subject.value!==e)u=a.subject.value,s="p";else{if("BlankNode"!==a.object.termType||a.object.value===e)continue;u=a.object.value,s="r"}const l=n.hashRelatedBlankNode(u,a,t,s);l in r?r[l].push(u):r[l]=[u]}return r}}},function(e,t){},function(e,t,n){"use strict";e.exports=n(12).NQuads},function(e,t,n){"use strict";const{RDF_LANGSTRING:r,RDF_PLAIN_LITERAL:o,RDF_OBJECT:i,RDF_XML_LITERAL:a,XSD_STRING:s}=n(8);let u;function l(){return"undefined"==typeof XMLSerializer?n(39).XMLSerializer:XMLSerializer}u="undefined"!=typeof Node?Node:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},e.exports=class{parse(e){const t={"@default":[]},n=e.getSubjects();for(let c=0;c<n.length;++c){const f=n[c];if(null===f)continue;const d=e.getSubjectTriples(f);if(null===d)continue;const h=d.predicates;for(const e in h){const n=h[e].objects;for(let c=0;c<n.length;++c){const d=n[c],h={};0===f.indexOf("_:")?h.subject={type:"blank node",value:f}:h.subject={type:"IRI",value:f},0===e.indexOf("_:")?h.predicate={type:"blank node",value:e}:h.predicate={type:"IRI",value:e};let p=d.value;if(d.type===a){const e=new(l());p="";for(let t=0;t<d.value.length;t++)d.value[t].nodeType===u.ELEMENT_NODE?p+=e.serializeToString(d.value[t]):d.value[t].nodeType===u.TEXT_NODE&&(p+=d.value[t].nodeValue)}h.object={},d.type===i?0===d.value.indexOf("_:")?h.object.type="blank node":h.object.type="IRI":(h.object.type="literal",d.type===o?d.language?(h.object.datatype=r,h.object.language=d.language):h.object.datatype=s:h.object.datatype=d.type),h.object.value=p,t["@default"].push(h)}}}return t}}},function(e,t){},function(e,t,n){"use strict";const r=n(3),{isArray:o,isObject:i,isEmptyObject:a,isString:s}=n(1),{isList:u,isValue:l,isGraph:c}=n(2),{expandIri:f,getContextValue:d,isKeyword:h,process:p}=n(5),{isAbsolute:g}=n(9),{addValue:y,validateTypeValue:v,getValues:m}=n(0),b={};function w(e,t){const n=[],i=Object.keys(t).sort();for(const a of i){const i=f(e,a,{vocab:!0});let u=t[a];o(u)||(u=[u]);for(const e of u){if(null===e)continue;if(!s(e))throw new r("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:t});const o={"@value":e};"@none"!==i&&(o["@language"]=a.toLowerCase()),n.push(o)}}return n}function x({activeCtx:e,options:t,activeProperty:n,value:r,expansionMap:i,asGraph:a,indexKey:s}){const u=[],l=Object.keys(r).sort();for(let h of l){const l=d(e,h,"@context");l&&(e=p({activeCtx:e,localCtx:l,options:t}));let g=r[h];o(g)||(g=[g]);const y=f(e,h,{vocab:!0});"@id"===s?h=f(e,h,{base:!0}):"@type"===s&&(h=y),g=b.expand({activeCtx:e,activeProperty:n,element:g,options:t,insideList:!1,expansionMap:i});for(let e of g)a&&!c(e)&&(e={"@graph":[e]}),"@type"===s?"@none"===y||(e["@type"]?e["@type"]=[h].concat(e["@type"]):e["@type"]=[h]):"@none"===y||s in e||(e[s]=h),u.push(e)}return u}e.exports=b,b.expand=(({activeCtx:e,activeProperty:t=null,element:n,options:I={},insideList:S=!1,expansionMap:A=(()=>void 0)})=>{if(null==n)return null;if("@default"===t&&(I=Object.assign({},I,{isFrame:!1})),!o(n)&&!i(n)){if(!S&&(null===t||"@graph"===f(e,t,{vocab:!0}))){const r=A({unmappedValue:n,activeCtx:e,activeProperty:t,options:I,insideList:S});return void 0===r?null:r}return function({activeCtx:e,activeProperty:t,value:n}){if(null==n)return null;const r=f(e,t,{vocab:!0});if("@id"===r)return f(e,n,{base:!0});if("@type"===r)return f(e,n,{vocab:!0,base:!0});const o=d(e,t,"@type");if(("@id"===o||"@graph"===r)&&s(n))return{"@id":f(e,n,{base:!0})};if("@vocab"===o&&s(n))return{"@id":f(e,n,{vocab:!0,base:!0})};if(h(r))return n;const i={};if(o&&!["@id","@vocab"].includes(o))i["@type"]=o;else if(s(n)){const n=d(e,t,"@language");null!==n&&(i["@language"]=n)}["boolean","number","string"].includes(typeof n)||(n=n.toString());return i["@value"]=n,i}({activeCtx:e,activeProperty:t,value:n})}if(o(n)){let i=[];const a=d(e,t,"@container")||[];S=S||a.includes("@list");for(let a=0;a<n.length;++a){let s=b.expand({activeCtx:e,activeProperty:t,element:n[a],options:I,expansionMap:A});if(S&&(o(s)||u(s)))throw new r("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null===s&&void 0===(s=A({unmappedValue:n[a],activeCtx:e,activeProperty:t,parent:n,index:a,options:I,expandedParent:i,insideList:S}))||(o(s)?i=i.concat(s):i.push(s))}return i}"@context"in n&&(e=p({activeCtx:e,localCtx:n["@context"],options:I}));let T=Object.keys(n).sort();for(const t of T){if("@type"===f(e,t,{vocab:!0})){const r=[].concat(n[t]).sort();for(const t of r){const n=d(e,t,"@context");n&&(e=p({activeCtx:e,localCtx:n,options:I}))}}}const C=f(e,t,{vocab:!0});let j={};!function e({activeCtx:t,activeProperty:n,expandedActiveProperty:m,element:I,expandedParent:S,options:A={},insideList:T,expansionMap:C}){const j=Object.keys(I).sort();const N=[];for(const e of j){let j,L=I[e];if("@context"===e)continue;let E=f(t,e,{vocab:!0});if((null===E||!g(E)&&!h(E))&&void 0===(E=C({unmappedProperty:e,activeCtx:t,activeProperty:n,parent:I,options:A,insideList:T,value:L,expandedParent:S})))continue;if(h(E)){if("@reverse"===m)throw new r("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:L});if(E in S)throw new r("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:E})}if("@id"===E){if(!s(L)){if(!A.isFrame)throw new r('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:L});if(i(L)){if(!a(L))throw new r('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:L})}else{if(!o(L))throw new r('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:L});if(!L.every(e=>s(e)))throw new r('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:L})}}y(S,"@id",[].concat(L).map(e=>s(e)?f(t,e,{base:!0}):e),{propertyIsArray:A.isFrame});continue}if("@type"===E){v(L),y(S,"@type",[].concat(L).map(e=>s(e)?f(t,e,{base:!0,vocab:!0}):e),{propertyIsArray:A.isFrame});continue}if("@graph"===E&&!i(L)&&!o(L))throw new r('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:L});if("@value"===E){if((i(L)||o(L))&&!A.isFrame)throw new r('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:L});y(S,"@value",L,{propertyIsArray:A.isFrame});continue}if("@language"===E){if(null===L)continue;if(!s(L)&&!A.isFrame)throw new r('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:L});L=[].concat(L).map(e=>s(e)?e.toLowerCase():e),y(S,"@language",L,{propertyIsArray:A.isFrame});continue}if("@index"===E){if(!s(L))throw new r('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:L});y(S,"@index",L);continue}if("@reverse"===E){if(!i(L))throw new r('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:L});if("@reverse"in(j=b.expand({activeCtx:t,activeProperty:"@reverse",element:L,options:A,expansionMap:C})))for(const e in j["@reverse"])y(S,e,j["@reverse"][e],{propertyIsArray:!0});let e=S["@reverse"]||null;for(const t in j){if("@reverse"===t)continue;null===e&&(e=S["@reverse"]={}),y(e,t,[],{propertyIsArray:!0});const n=j[t];for(let o=0;o<n.length;++o){const i=n[o];if(l(i)||u(i))throw new r('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:j});y(e,t,i,{propertyIsArray:!0})}}continue}if("@nest"===E){N.push(e);continue}let B=t;const k=d(t,e,"@context");k&&(B=p({activeCtx:t,localCtx:k,options:A}));const O=d(B,e,"@container")||[];if(O.includes("@language")&&i(L))j=w(B,L);else if(O.includes("@index")&&i(L)){const t=O.includes("@graph");j=x({activeCtx:B,options:A,activeProperty:e,value:L,expansionMap:C,asGraph:t,indexKey:"@index"})}else if(O.includes("@id")&&i(L)){const t=O.includes("@graph");j=x({activeCtx:B,options:A,activeProperty:e,value:L,expansionMap:C,asGraph:t,indexKey:"@id"})}else if(O.includes("@type")&&i(L))j=x({activeCtx:B,options:A,activeProperty:e,value:L,expansionMap:C,asGraph:!1,indexKey:"@type"});else{const t="@list"===E;if(t||"@set"===E){let e=n;if(t&&"@graph"===m&&(e=null),j=b.expand({activeCtx:B,activeProperty:e,element:L,options:A,insideList:t,expansionMap:C}),t&&u(j))throw new r("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else j=b.expand({activeCtx:B,activeProperty:e,element:L,options:A,insideList:!1,expansionMap:C})}if(null===j&&"@value"!==E&&void 0===(j=C({unmappedValue:L,expandedProperty:E,activeCtx:B,activeProperty:n,parent:I,options:A,insideList:T,key:e,expandedParent:S})))continue;if("@list"!==E&&!u(j)&&O.includes("@list")&&(j={"@list":j=o(j)?j:[j]}),O.includes("@graph")&&!O.some(e=>"@id"===e||"@index"===e)&&(j=[].concat(j).map(e=>c(e)?e:{"@graph":[].concat(e)})),B.mappings[e]&&B.mappings[e].reverse){const e=S["@reverse"]=S["@reverse"]||{};o(j)||(j=[j]);for(let t=0;t<j.length;++t){const n=j[t];if(l(n)||u(n))throw new r('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:j});y(e,E,n,{propertyIsArray:!0})}continue}const D=!["@index","@id","@type","@value","@language"].includes(E);y(S,E,j,{propertyIsArray:D})}for(const a of N){const s=o(I[a])?I[a]:[I[a]];for(const o of s){if(!i(o)||Object.keys(o).some(e=>"@value"===f(t,e,{vocab:!0})))throw new r("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:o});e({activeCtx:t,activeProperty:n,expandedActiveProperty:m,element:o,expandedParent:S,options:A,insideList:T,expansionMap:C})}}}({activeCtx:e,activeProperty:t,expandedActiveProperty:C,element:n,expandedParent:j,options:I,insideList:S,expansionMap:A});let N=(T=Object.keys(j)).length;if("@value"in j){if("@type"in j&&"@language"in j)throw new r('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:j});let o=N-1;if("@type"in j&&(o-=1),"@index"in j&&(o-=1),"@language"in j&&(o-=1),0!==o)throw new r('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:j});const i=null===j["@value"]?[]:[].concat(j["@value"]),u=m(j,"@type");if(0===i.length){const r=A({unmappedValue:j,activeCtx:e,activeProperty:t,element:n,options:I,insideList:S});j=void 0!==r?r:null}else{if(!i.every(e=>s(e)||a(e))&&"@language"in j)throw new r("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:j});if(!u.every(e=>g(e)&&!(s(e)&&0===e.indexOf("_:"))||a(e)))throw new r('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:j})}}else if("@type"in j&&!o(j["@type"]))j["@type"]=[j["@type"]];else if("@set"in j||"@list"in j){if(N>1&&!(2===N&&"@index"in j))throw new r('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:j});"@set"in j&&(j=j["@set"],N=(T=Object.keys(j)).length)}else if(1===N&&"@language"in j){const r=A(j,{unmappedValue:j,activeCtx:e,activeProperty:t,element:n,options:I,insideList:S});j=void 0!==r?r:null}if(i(j)&&!I.keepFreeFloatingNodes&&!S&&(null===t||"@graph"===C)&&(0===N||"@value"in j||"@list"in j||1===N&&"@id"in j)){const r=A({unmappedValue:j,activeCtx:e,activeProperty:t,element:n,options:I,insideList:S});j=void 0!==r?r:null}return j})},function(e,t,n){"use strict";const{clone:r}=n(0);e.exports=class{constructor(e=100){this.order=[],this.cache=new Map,this.size=e}get(e,t){const n=this.cache.get(e);if(n){const e=JSON.stringify(t);return n.get(e)||null}return null}set(e,t,n){if(this.order.length===this.size){const e=this.order.shift();this.cache.get(e.activeCtx).delete(e.localCtx)}const o=JSON.stringify(t);this.order.push({activeCtx:e,localCtx:o});let i=this.cache.get(e);i||(i=new Map,this.cache.set(e,i)),i.set(o,r(n))}}},function(e,t,n){"use strict";const{isSubjectReference:r}=n(2),{createMergedNodeMap:o}=n(11),i={};e.exports=i,i.flatten=(e=>{const t=o(e),n=[],i=Object.keys(t).sort();for(let e=0;e<i.length;++e){const o=t[i[e]];r(o)||n.push(o)}return n})},function(e,t,n){"use strict";const r=n(2),o=n(1),i=n(0),{RDF_LIST:a,RDF_FIRST:s,RDF_REST:u,RDF_NIL:l,RDF_TYPE:c,XSD_BOOLEAN:f,XSD_DOUBLE:d,XSD_INTEGER:h,XSD_STRING:p}=n(8),g={};function y(e,t){if(e.termType.endsWith("Node"))return{"@id":e.value};const n={"@value":e.value};if(e.language)n["@language"]=e.language;else{let r=e.datatype.value;if(r||(r=p),t){if(r===f)"true"===n["@value"]?n["@value"]=!0:"false"===n["@value"]&&(n["@value"]=!1);else if(o.isNumeric(n["@value"]))if(r===h){const e=parseInt(n["@value"],10);e.toFixed(0)===n["@value"]&&(n["@value"]=e)}else r===d&&(n["@value"]=parseFloat(n["@value"]));[f,h,d,p].includes(r)||(n["@type"]=r)}else r!==p&&(n["@type"]=r)}return n}e.exports=g,g.fromRDF=(async(e,{useRdfType:t=!1,useNativeTypes:n=!1})=>{const f={},d={"@default":f},h={};for(const r of e){const e="DefaultGraph"===r.graph.termType?"@default":r.graph.value;e in d||(d[e]={}),"@default"===e||e in f||(f[e]={"@id":e});const o=d[e],a=r.subject.value,s=r.predicate.value,u=r.object;a in o||(o[a]={"@id":a});const p=o[a],g=u.termType.endsWith("Node");if(!g||u.value in o||(o[u.value]={"@id":u.value}),s===c&&!t&&g){i.addValue(p,"@type",u.value,{propertyIsArray:!0});continue}const v=y(u,n);if(i.addValue(p,s,v,{propertyIsArray:!0}),g)if(u.value===l){const e=o[u.value];"usages"in e||(e.usages=[]),e.usages.push({node:p,property:s,value:v})}else u.value in h?h[u.value]=!1:h[u.value]={node:p,property:s,value:v}}for(const e in d){const t=d[e];if(!(l in t))continue;const n=t[l];if(n.usages){for(let e of n.usages){let n=e.node,i=e.property,c=e.value;const f=[],d=[];let p=Object.keys(n).length;for(;i===u&&o.isObject(h[n["@id"]])&&o.isArray(n[s])&&1===n[s].length&&o.isArray(n[u])&&1===n[u].length&&(3===p||4===p&&o.isArray(n["@type"])&&1===n["@type"].length&&n["@type"][0]===a)&&(f.push(n[s][0]),d.push(n["@id"]),n=(e=h[n["@id"]]).node,i=e.property,c=e.value,p=Object.keys(n).length,r.isBlankNode(n)););if(i===s){if(n["@id"]===l)continue;c=t[c["@id"]][u][0],f.pop(),d.pop()}delete c["@id"],c["@list"]=f.reverse();for(const e of d)delete t[e]}delete n.usages}}const p=[],g=Object.keys(f).sort();for(const e of g){const t=f[e];if(e in d){const n=t["@graph"]=[],o=d[e],i=Object.keys(o).sort();for(const e of i){const t=o[e];r.isSubjectReference(t)||n.push(t)}}r.isSubjectReference(t)||p.push(t)}return p})},function(e,t,n){"use strict";const{createNodeMap:r}=n(11),{isKeyword:o}=n(5),i=n(2),a=n(1),s=n(0),{RDF_FIRST:u,RDF_REST:l,RDF_NIL:c,RDF_TYPE:f,RDF_LANGSTRING:d,XSD_BOOLEAN:h,XSD_DOUBLE:p,XSD_INTEGER:g,XSD_STRING:y}=n(8),{isAbsolute:v}=n(9),m={};function b(e,t,n,r,a){const s=Object.keys(t).sort();for(let u=0;u<s.length;++u){const l=s[u],c=t[l],d=Object.keys(c).sort();for(let t of d){const s=c[t];if("@type"===t)t=f;else if(o(t))continue;for(const o of s){const s={termType:l.startsWith("_:")?"BlankNode":"NamedNode",value:l};if(!v(l))continue;const u={termType:t.startsWith("_:")?"BlankNode":"NamedNode",value:t};if(v(t)&&("BlankNode"!==u.termType||a.produceGeneralizedRdf))if(i.isList(o))w(o["@list"],r,s,u,e,n);else{const t=x(o);t&&e.push({subject:s,predicate:u,object:t,graph:n})}}}}}function w(e,t,n,r,o,i){const a={termType:"NamedNode",value:u},s={termType:"NamedNode",value:l},f={termType:"NamedNode",value:c};for(const u of e){const e={termType:"BlankNode",value:t.getId()};o.push({subject:n,predicate:r,object:e,graph:i}),n=e,r=a;const l=x(u);l&&o.push({subject:n,predicate:r,object:l,graph:i}),r=s}o.push({subject:n,predicate:r,object:f,graph:i})}function x(e){const t={};if(i.isValue(e)){t.termType="Literal",t.value=void 0,t.datatype={termType:"NamedNode"};let n=e["@value"];const r=e["@type"]||null;a.isBoolean(n)?(t.value=n.toString(),t.datatype.value=r||h):a.isDouble(n)||r===p?(a.isDouble(n)||(n=parseFloat(n)),t.value=n.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),t.datatype.value=r||p):a.isNumber(n)?(t.value=n.toFixed(0),t.datatype.value=r||g):"@language"in e?(t.value=n,t.datatype.value=r||d,t.language=e["@language"]):(t.value=n,t.datatype.value=r||y)}else{const n=a.isObject(e)?e["@id"]:e;t.termType=n.startsWith("_:")?"BlankNode":"NamedNode",t.value=n}return"NamedNode"!==t.termType||v(t.value)?t:null}e.exports=m,m.toRDF=((e,t)=>{const n=new s.IdentifierIssuer("_:b"),o={"@default":{}};r(e,o,"@default",n);const i=[],a=Object.keys(o).sort();for(const e of a){let r;if("@default"===e)r={termType:"DefaultGraph",value:""};else{if(!v(e))continue;(r=e.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"}).value=e}b(i,o[e],r,n,t)}return i})},function(e,t,n){"use strict";const{isKeyword:r}=n(5),o=n(2),i=n(1),a=n(0),s=n(3),{createNodeMap:u,mergeNodeMapGraphs:l}=n(11),c={};function f(e){const t={};for(const n in e)void 0!==e[n]&&(t["@"+n]=[e[n]]);return[t]}function d(e,t,n){for(let r=n.length-1;r>=0;--r){const o=n[r];if(o.graph===t&&o.subject["@id"]===e["@id"])return!0}return!1}function h(e,t,n){const r="@"+n;let o=r in e?e[r][0]:t[n];return"embed"===n&&(!0===o?o="@last":!1===o?o="@never":"@always"!==o&&"@never"!==o&&"@link"!==o&&(o="@last")),o}function p(e){if(!i.isArray(e)||1!==e.length||!i.isObject(e[0]))throw new s("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e})}function g(e,t,n,s){let u=!0,l=!1;for(const c in n){let f=!1;const d=a.getValues(t,c),h=0===a.getValues(n,c).length;if(r(c)){if("@id"!==c&&"@type"!==c)continue;if(u=!1,"@id"===c){if(n["@id"].length>=0&&!i.isEmptyObject(n["@id"][0]))return n["@id"].includes(d[0]);f=!0;continue}if("@type"in n)if(h){if(d.length>0)return!1;f=!0}else{if(1!==n["@type"].length||!i.isEmptyObject(n["@type"][0])){for(const e of n["@type"])if(d.some(t=>t===e))return!0;return!1}f=d.length>0}}const g=a.getValues(n,c)[0];let y=!1;if(g&&(p([g]),y="@default"in g),u=!1,0!==d.length||!y){if(d.length>0&&h)return!1;if(void 0===g){if(d.length>0)return!1;f=!0}else if(i.isObject(g))f=d.length>0;else if(o.isValue(g))f=d.some(e=>b(g,e));else if(o.isSubject(g)||o.isSubjectReference(g))f=d.some(t=>m(e,g,t,s));else if(o.isList(g)){const t=g["@list"][0];if(o.isList(d[0])){const n=d[0]["@list"];o.isValue(t)?f=n.some(e=>b(t,e)):(o.isSubject(t)||o.isSubjectReference(t))&&(f=n.some(n=>m(e,t,n,s)))}else f=!1}if(!f&&s.requireAll)return!1;l=l||f}}return u||l}function y(e,t){const n=e.uniqueEmbeds[e.graph],r=n[t],o=r.parent,s=r.property,u={"@id":t};if(i.isArray(o)){for(let e=0;e<o.length;++e)if(a.compareValues(o[e],u)){o[e]=u;break}}else{const e=i.isArray(o[s]);a.removeValue(o,s,u,{propertyIsArray:e}),a.addValue(o,s,u,{propertyIsArray:e})}const l=e=>{const t=Object.keys(n);for(const r of t)r in n&&i.isObject(n[r].parent)&&n[r].parent["@id"]===e&&(delete n[r],l(r))};l(t)}function v(e,t,n){i.isObject(e)?a.addValue(e,t,n,{propertyIsArray:!0}):e.push(n)}function m(e,t,n,r){if(!("@id"in n))return!1;const o=e.subjects[n["@id"]];return o&&g(e,o,t,r)}function b(e,t){const n=t["@value"],r=t["@type"],o=t["@language"],a=e["@value"]?i.isArray(e["@value"])?e["@value"]:[e["@value"]]:[],s=e["@type"]?i.isArray(e["@type"])?e["@type"]:[e["@type"]]:[],u=e["@language"]?i.isArray(e["@language"])?e["@language"]:[e["@language"]]:[];return 0===a.length&&0===s.length&&0===u.length||!(!a.includes(n)&&!i.isEmptyObject(a[0]))&&(!!(!r&&0===s.length||s.includes(r)||r&&i.isEmptyObject(s[0]))&&!!(!o&&0===u.length||u.includes(o)||o&&i.isEmptyObject(u[0])))}e.exports=c,c.frameMergedOrDefault=((e,t,n)=>{const r={options:n,graph:"@default",graphMap:{"@default":{}},graphStack:[],subjectStack:[],link:{},bnodeMap:{}},o=new a.IdentifierIssuer("_:b");u(e,r.graphMap,"@default",o),n.merged&&(r.graphMap["@merged"]=l(r.graphMap),r.graph="@merged"),r.subjects=r.graphMap[r.graph];const i=[];return c.frame(r,Object.keys(r.subjects).sort(),t,i),n.pruneBlankNodeIdentifiers&&(n.bnodesToClear=Object.keys(r.bnodeMap).filter(e=>1===r.bnodeMap[e].length)),i}),c.frame=((e,t,n,s,u=null)=>{p(n),n=n[0];const l=e.options,m={embed:h(n,l,"embed"),explicit:h(n,l,"explicit"),requireAll:h(n,l,"requireAll")},w=function(e,t,n,r){const o={};for(const i of t){const t=e.graphMap[e.graph][i];g(e,t,n,r)&&(o[i]=t)}return o}(e,t,n,m),x=Object.keys(w).sort();for(const t of x){const p=w[t];if("@link"===m.embed&&t in e.link){v(s,u,e.link[t]);continue}null===u?e.uniqueEmbeds={[e.graph]:{}}:e.uniqueEmbeds[e.graph]=e.uniqueEmbeds[e.graph]||{};const g={};if(g["@id"]=t,0===t.indexOf("_:")&&a.addValue(e.bnodeMap,t,g,{propertyIsArray:!0}),e.link[t]=g,"@never"===m.embed||d(p,e.graph,e.subjectStack))v(s,u,g);else{if("@last"===m.embed&&(t in e.uniqueEmbeds[e.graph]&&y(e,t),e.uniqueEmbeds[e.graph][t]={parent:s,property:u}),e.subjectStack.push({subject:p,graph:e.graph}),t in e.graphMap){let r=!1,o=null;"@graph"in n?(o=n["@graph"][0],i.isObject(o)||(o={}),r=!("@merged"===t||"@default"===t)):(r="@merged"!==e.graph,o={}),r&&(e.graphStack.push(e.graph),e.graph=t,c.frame(e,Object.keys(e.graphMap[t]).sort(),[o],g,"@graph"),e.graph=e.graphStack.pop)}for(const t of Object.keys(p).sort())if(r(t)){if(g[t]=a.clone(p[t]),"@type"===t)for(const t of p["@type"])0===t.indexOf("_:")&&a.addValue(e.bnodeMap,t,g,{propertyIsArray:!0})}else if(!m.explicit||t in n)for(let r of p[t]){const i=t in n?n[t]:f(m);if(o.isList(r)){const i={"@list":[]};v(g,t,i);const s=r["@list"];for(const u in s)if(r=s[u],o.isSubjectReference(r)){const o=t in n?n[t][0]["@list"]:f(m);c.frame(e,[r["@id"]],o,i,"@list")}else v(i,"@list",a.clone(r))}else o.isSubjectReference(r)?c.frame(e,[r["@id"]],i,g,t):b(i[0],r)&&v(g,t,a.clone(r))}for(const e of Object.keys(n).sort()){if(r(e))continue;const t=n[e][0]||{};if(!(h(t,l,"omitDefault")||e in g)){let n="@null";"@default"in t&&(n=a.clone(t["@default"])),i.isArray(n)||(n=[n]),g[e]=[{"@preserve":n}]}}if("@reverse"in n)for(const r of Object.keys(n["@reverse"]).sort()){const o=n["@reverse"][r];for(const n of Object.keys(e.subjects)){a.getValues(e.subjects[n],r).some(e=>e["@id"]===t)&&(g["@reverse"]=g["@reverse"]||{},a.addValue(g["@reverse"],r,[],{propertyIsArray:!0}),c.frame(e,[n],o,g["@reverse"][r],u))}}v(s,u,g),e.subjectStack.pop()}}})},function(e,t,n){"use strict";const r=n(3),{isArray:o,isObject:i,isString:a}=n(1),{isList:s,isValue:u,isGraph:l,isSimpleGraph:c,isSubjectReference:f}=n(2),{expandIri:d,getContextValue:h,isKeyword:p,process:g}=n(5),{removeBase:y}=n(9),{addValue:v,compareShortestLeast:m}=n(0),b={};function w(e,t){if("@nest"!==d(e,t,{vocab:!0}))throw new r("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}e.exports=b,b.compact=(({activeCtx:e,activeProperty:t=null,element:n,options:a={},compactionMap:d=(()=>void 0)})=>{if(o(n)){let r=[];for(let o=0;o<n.length;++o){let i=b.compact({activeCtx:e,activeProperty:t,element:n[o],options:a,compactionMap:d});null===i&&void 0===(i=d({unmappedValue:n[o],activeCtx:e,activeProperty:t,parent:n,index:o,options:a}))||r.push(i)}if(a.compactArrays&&1===r.length){0===(h(e,t,"@container")||[]).length&&(r=r[0])}return r}const y=h(e,t,"@context");if(y&&(e=g({activeCtx:e,localCtx:y,options:a})),i(n)){if(a.link&&"@id"in n&&n["@id"]in a.link){const e=a.link[n["@id"]];for(let t=0;t<e.length;++t)if(e[t].expanded===n)return e[t].compacted}if(u(n)||f(n)){const r=b.compactValue({activeCtx:e,activeProperty:t,value:n});return a.link&&f(n)&&(n["@id"]in a.link||(a.link[n["@id"]]=[]),a.link[n["@id"]].push({expanded:n,compacted:r})),r}const y="@reverse"===t,m={};a.link&&"@id"in n&&(n["@id"]in a.link||(a.link[n["@id"]]=[]),a.link[n["@id"]].push({expanded:n,compacted:m}));let x=n["@type"]||[];x.length>1&&(x=Array.from(x).sort());for(const t of x){const n=b.compactIri({activeCtx:e,iri:t,relativeTo:{vocab:!0}}),r=h(e,n,"@context");r&&(e=g({activeCtx:e,localCtx:r,options:a}))}const I=Object.keys(n).sort();for(const f of I){const g=n[f];if("@id"!==f&&"@type"!==f)if("@reverse"!==f)if("@preserve"!==f)if("@index"!==f)if("@graph"!==f&&"@list"!==f&&p(f)){const t=b.compactIri({activeCtx:e,iri:f,relativeTo:{vocab:!0}});v(m,t,g)}else{if(!o(g))throw new r("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===g.length){const t=b.compactIri({activeCtx:e,iri:f,value:g,relativeTo:{vocab:!0},reverse:y}),n=t in e.mappings?e.mappings[t]["@nest"]:null;let r=m;n&&(w(e,n),i(m[n])||(m[n]={}),r=m[n]),v(r,t,g,{propertyIsArray:!0})}for(const t of g){const n=b.compactIri({activeCtx:e,iri:f,value:t,relativeTo:{vocab:!0},reverse:y}),p=n in e.mappings?e.mappings[n]["@nest"]:null;let g=m;p&&(w(e,p),i(m[p])||(m[p]={}),g=m[p]);const x=h(e,n,"@container")||[],I=l(t),S=s(t);let A;S?A=t["@list"]:I&&(A=t["@graph"]);let T=b.compact({activeCtx:e,activeProperty:n,element:S||I?A:t,options:a,compactionMap:d});if(S)if(o(T)||(T=[T]),x.includes("@list")){if(n in g)throw new r('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"})}else T={[b.compactIri({activeCtx:e,iri:"@list",relativeTo:{vocab:!0}})]:T},"@index"in t&&(T[b.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"]);if(I)if(x.includes("@graph")&&(x.includes("@id")||x.includes("@index")&&c(t))){let r;n in g?r=g[n]:g[n]=r={};const o=(x.includes("@id")?t["@id"]:t["@index"])||b.compactIri({activeCtx:e,iri:"@none",vocab:!0});v(r,o,T,{propertyIsArray:!a.compactArrays||x.includes("@set")})}else x.includes("@graph")&&c(t)?v(g,n,T,{propertyIsArray:!a.compactArrays||x.includes("@set")}):(o(T)&&1===T.length&&a.compactArrays&&(T=T[0]),T={[b.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}})]:T},"@id"in t&&(T[b.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]=t["@id"]),"@index"in t&&(T[b.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=t["@index"]),v(g,n,T,{propertyIsArray:!a.compactArrays||x.includes("@set")}));else if(x.includes("@language")||x.includes("@index")||x.includes("@id")||x.includes("@type")){let r,o;if(n in g?r=g[n]:g[n]=r={},x.includes("@language"))u(T)&&(T=T["@value"]),o=t["@language"];else if(x.includes("@index"))o=t["@index"];else if(x.includes("@id")){const t=b.compactIri({activeCtx:e,iri:"@id",vocab:!0});o=T[t],delete T[t]}else if(x.includes("@type")){const t=b.compactIri({activeCtx:e,iri:"@type",vocab:!0});let n;switch([o,...n]=[].concat(T[t]||[]),n.length){case 0:delete T[t];break;case 1:T[t]=n[0];break;default:T[t]=n}}o||(o=b.compactIri({activeCtx:e,iri:"@none",vocab:!0})),v(r,o,T,{propertyIsArray:x.includes("@set")})}else{const e=!a.compactArrays||x.includes("@set")||x.includes("@list")||o(T)&&0===T.length||"@list"===f||"@graph"===f;v(g,n,T,{propertyIsArray:e})}}}else{if((h(e,t,"@container")||[]).includes("@index"))continue;const n=b.compactIri({activeCtx:e,iri:f,relativeTo:{vocab:!0}});v(m,n,g)}else{const n=b.compact({activeCtx:e,activeProperty:t,element:g,options:a,compactionMap:d});o(n)&&0===n.length||v(m,f,n)}else{const t=b.compact({activeCtx:e,activeProperty:"@reverse",element:g,options:a,compactionMap:d});for(const n in t)if(e.mappings[n]&&e.mappings[n].reverse){const r=t[n],o=(h(e,n,"@container")||[]).includes("@set")||!a.compactArrays;v(m,n,r,{propertyIsArray:o}),delete t[n]}if(Object.keys(t).length>0){const n=b.compactIri({activeCtx:e,iri:f,relativeTo:{vocab:!0}});v(m,n,t)}}else{let t=[].concat(g).map(t=>b.compactIri({activeCtx:e,iri:t,relativeTo:{vocab:"@type"===f}}));1===t.length&&(t=t[0]);const n=b.compactIri({activeCtx:e,iri:f,relativeTo:{vocab:!0}}),r=o(t)&&0===g.length;v(m,n,t,{propertyIsArray:r})}}return m}return n}),b.compactIri=(({activeCtx:e,iri:t,value:n=null,relativeTo:r={vocab:!1},reverse:o=!1})=>{if(null===t)return t;const a=e.getInverse();if(p(t)&&t in a&&"@none"in a[t]&&"@type"in a[t]["@none"]&&"@none"in a[t]["@none"]["@type"])return a[t]["@none"]["@type"]["@none"];if(r.vocab&&t in a){const r=e["@language"]||"@none",a=[];i(n)&&"@index"in n&&!("@graph"in n)&&a.push("@index","@index@set"),i(n)&&"@preserve"in n&&(n=n["@preserve"][0]),l(n)?("@index"in n&&a.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n&&a.push("@graph@id","@graph@id@set"),a.push("@graph","@graph@set","@set"),"@index"in n||a.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in n||a.push("@graph@id","@graph@id@set")):i(n)&&!u(n)&&a.push("@id","@id@set","@type","@set@type");let c="@language",d="@null";if(o)c="@type",d="@reverse",a.push("@set");else if(s(n)){"@index"in n||a.push("@list");const e=n["@list"];if(0===e.length)c="@any",d="@none";else{let t=0===e.length?r:null,n=null;for(let r=0;r<e.length;++r){const o=e[r];let i="@none",a="@none";if(u(o)?"@language"in o?i=o["@language"]:"@type"in o?a=o["@type"]:i="@null":a="@id",null===t?t=i:i!==t&&u(o)&&(t="@none"),null===n?n=a:a!==n&&(n="@none"),"@none"===t&&"@none"===n)break}t=t||"@none","@none"!==(n=n||"@none")?(c="@type",d=n):d=t}}else u(n)?"@language"in n&&!("@index"in n)?(a.push("@language","@language@set"),d=n["@language"]):"@type"in n&&(c="@type",d=n["@type"]):(c="@type",d="@id"),a.push("@set");a.push("@none"),!i(n)||"@index"in n||a.push("@index","@index@set"),u(n)&&1===Object.keys(n).length&&a.push("@language","@language@set");const h=function(e,t,n,r,o,i){null===i&&(i="@null");const a=[];if("@id"!==i&&"@reverse"!==i||!f(n))a.push(i);else{"@reverse"===i&&a.push("@reverse");const t=b.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:!0}});t in e.mappings&&e.mappings[t]&&e.mappings[t]["@id"]===n["@id"]?a.push.apply(a,["@vocab","@id"]):a.push.apply(a,["@id","@vocab"])}a.push("@none");const s=e.inverse[t];for(let e=0;e<r.length;++e){const t=r[e];if(!(t in s))continue;const n=s[t][o];for(let e=0;e<a.length;++e){const t=a[e];if(t in n)return n[t]}}return null}(e,t,n,a,c,d);if(null!==h)return h}if(r.vocab&&"@vocab"in e){const n=e["@vocab"];if(0===t.indexOf(n)&&t!==n){const r=t.substr(n.length);if(!(r in e.mappings))return r}}let c=null;const d=[];let h=e.fastCurieMap;const g=t.length-1;for(let e=0;e<g&&t[e]in h;++e)""in(h=h[t[e]])&&d.push(h[""][0]);for(let r=d.length-1;r>=0;--r){const o=d[r],i=o.terms;for(const r of i){const i=r+":"+t.substr(o.iri.length);e.mappings[r]._prefix&&(!(i in e.mappings)||null===n&&e.mappings[i]["@id"]===t)&&(null===c||m(i,c)<0)&&(c=i)}}return null!==c?c:r.vocab?t:y(e["@base"],t)}),b.compactValue=(({activeCtx:e,activeProperty:t,value:n})=>{if(u(n)){const r=h(e,t,"@type"),o=h(e,t,"@language"),i=h(e,t,"@container")||[],s="@index"in n&&!i.includes("@index");if(!s&&(n["@type"]===r||n["@language"]===o))return n["@value"];const u=Object.keys(n).length,l=1===u||2===u&&"@index"in n&&!s,c="@language"in e,f=a(n["@value"]),d=e.mappings[t]&&null===e.mappings[t]["@language"];if(l&&(!c||!f||d))return n["@value"];const p={};return s&&(p[b.compactIri({activeCtx:e,iri:"@index",relativeTo:{vocab:!0}})]=n["@index"]),"@type"in n?p[b.compactIri({activeCtx:e,iri:"@type",relativeTo:{vocab:!0}})]=b.compactIri({activeCtx:e,iri:n["@type"],relativeTo:{vocab:!0}}):"@language"in n&&(p[b.compactIri({activeCtx:e,iri:"@language",relativeTo:{vocab:!0}})]=n["@language"]),p[b.compactIri({activeCtx:e,iri:"@value",relativeTo:{vocab:!0}})]=n["@value"],p}const r=d(e,t,{vocab:!0}),o=h(e,t,"@type"),i=b.compactIri({activeCtx:e,iri:n["@id"],relativeTo:{vocab:"@vocab"===o}});return"@id"===o||"@vocab"===o||"@graph"===r?i:{[b.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}})]:i}}),
/**
 * Removes the @preserve keywords as the last step of the compaction
 * algorithm when it is running on framed output.
 *
 * @param ctx the active context used to compact the input.
 * @param input the framed, compacted output.
 * @param options the compaction options used.
 *
 * @return the resulting output.
 */
b.removePreserve=((e,t,n)=>{if(o(t)){const r=[];for(let o=0;o<t.length;++o){const i=b.removePreserve(e,t[o],n);null!==i&&r.push(i)}t=r}else if(i(t)){
// remove @preserve
if("@preserve"in t)return"@null"===t["@preserve"]?null:t["@preserve"];if(u(t))return t;if(s(t))return t["@list"]=b.removePreserve(e,t["@list"],n),t;const r=b.compactIri({activeCtx:e,iri:"@id",relativeTo:{vocab:!0}});if(r in t){const e=t[r];if(e in n.link){const r=n.link[e].indexOf(t);if(-1!==r)return n.link[e][r];n.link[e].push(t)}else n.link[e]=[t]}const i=b.compactIri({activeCtx:e,iri:"@graph",relativeTo:{vocab:!0}});for(const a in t){if(a===r&&n.bnodesToClear.includes(t[a])){delete t[r];continue}let s=b.removePreserve(e,t[a],n);const u=h(e,a,"@container")||[];n.compactArrays&&o(s)&&1===s.length&&0===u.length&&a!==i&&(s=s[0]),t[a]=s}}return t})},function(e,t,n){"use strict";const{parseLinkHeader:r,buildHeaders:o}=n(0),{LINK_HEADER_REL:i}=n(8),a=n(3),s=n(17);e.exports=(({secure:e,strictSSL:t=!0,maxRedirects:u=-1,request:l,headers:c={}}={strictSSL:!0,maxRedirects:-1,headers:{}})=>{c=o(c),l=l||n(48);const f=n(49);return(new s).wrapLoader(function(n){return async function n(o,s){if(0!==o.indexOf("http:")&&0!==o.indexOf("https:"))throw new a('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:o});if(e&&0!==o.indexOf("https"))throw new a('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:o});let d=null;if(null!==d)return d;let h;try{h=await function(e,t){return new Promise((n,r)=>{e(t,(e,t,o)=>{e?r(e):n({res:t,body:o})})})}(l,{url:o,headers:c,strictSSL:t,followRedirect:!1})}catch(e){throw new a("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:o,cause:e})}const{res:p,body:g}=h;d={contextUrl:null,documentUrl:o,document:g||null};const y=f.STATUS_CODES[p.statusCode];if(p.statusCode>=400)throw new a("URL could not be dereferenced: "+y,"jsonld.InvalidUrl",{code:"loading document failed",url:o,httpStatusCode:p.statusCode});if(p.headers.link&&"application/ld+json"!==p.headers["content-type"]){const e=r(p.headers.link)[i];if(Array.isArray(e))throw new a("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:o});e&&(d.contextUrl=e.target)}if(p.statusCode>=300&&p.statusCode<400&&p.headers.location){if(s.length===u)throw new a("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:o,httpStatusCode:p.statusCode,redirects:s});if(-1!==s.indexOf(o))throw new a("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:o,httpStatusCode:p.statusCode,redirects:s});return s.push(o),n(p.headers.location,s)}s.push(o);return d}(n,[])})})},function(e,t){},function(e,t){},function(e,t,n){"use strict";const{parseLinkHeader:r,buildHeaders:o}=n(0),{LINK_HEADER_REL:i}=n(8),a=n(3),s=n(17),u=/(^|(\r\n))link:/i;e.exports=(({secure:e,headers:t={},xhr:n}={headers:{}})=>{return t=o(t),(new s).wrapLoader(async function(o){if(0!==o.indexOf("http:")&&0!==o.indexOf("https:"))throw new a('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:o});if(e&&0!==o.indexOf("https"))throw new a('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:o});let s;try{s=await function(e,t,n){const r=new(e=e||XMLHttpRequest);return new Promise((e,o)=>{r.onload=(()=>e(r)),r.onerror=(e=>o(e)),r.open("GET",t,!0);for(const e in n)r.setRequestHeader(e,n[e]);r.send()})}(n,o,t)}catch(e){throw new a("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:o,cause:e})}if(s.status>=400)throw new a("URL could not be dereferenced: "+s.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:o,httpStatusCode:s.status});const l={contextUrl:null,documentUrl:o,document:s.response},c=s.getResponseHeader("Content-Type");let f;u.test(s.getAllResponseHeaders())&&(f=s.getResponseHeader("Link"));if(f&&"application/ld+json"!==c){if(f=r(f)[i],Array.isArray(f))throw new a("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:o});f&&(l.contextUrl=f.target)}return l})})},function(e,t,n){"use strict";e.exports=(e=>{class t{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t}),t.compact=function(t,n){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):e.compact(t,n)},t.expand=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):e.expand(t)},t.flatten=function(t){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):e.flatten(t)},t})},function(e,t){e.exports=function(e){for(var t=[],n={},r=0;r<e["@graph"].length;r++){let o=e["@graph"][r];if(o["geo:lat"]&&o["geo:long"]){n[o["@id"]]=[o["geo:long"],o["geo:lat"]];let e={id:o["@id"],type:"Feature",geometry:{type:"Point",coordinates:[o["geo:long"],o["geo:lat"]]}};t.push(e)}}return{type:"FeatureCollection",features:function(e,t){return e["@graph"].filter(e=>"osm:Way"===e["@type"]).map(e=>{e["osm:hasNodes"]?"string"==typeof e["osm:hasNodes"]&&(e["osm:hasNodes"]=[e["osm:hasNodes"]]):e["osm:hasNodes"]=[],e["osm:hasNodes"]=e["osm:hasNodes"].map(e=>t[e]);let n={type:"LineString",coordinates:e["osm:hasNodes"]};return{id:e["@id"],type:"Feature",properties:{highway:e["osm:highway"],name:e["rdfs:label"]?e["rdfs:label"]:""},geometry:n}})}(e,n)}}},function(e,t,n){var r=n(54);const o=n(18).promises,i=n(55),a=n(56);class s{constructor(){this.graph={},this.nodes={},this.urlsFetched=[],this.sharedPromises=[]}findClosestNode(e){let t=1/0,n={};for(let r in this.nodes){let o=this.nodes[r],i=a({latitude:o["geo:lat"],longitude:o["geo:long"]},{latitude:e[0],longitude:e[1]});i<t&&(t=i,n=r)}return n}async query(e,t){var n={bottom:e[0]-.02,left:e[1]-.02,top:t[0]+.02,right:t[1]+.02},s={"@context":{geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",osm:"https://w3id.org/openstreetmap/terms#","osm:hasNodes":{"@type":"@id","@container":"@list"}}},u=r.tilesInBbox(n,14),l=[];for(let e of u){let{x:t,y:n,z:r}=e,i="https://tiles.openplanner.team/planet/"+r+"/"+t+"/"+n+"/";this.urlsFetched.indexOf(i)>-1?console.log("Reusing tile "+i):this.sharedPromises[i]?(console.log("Reusing tile that is being downloaded: "+i),l.push(this.sharedPromises[i])):(this.sharedPromises[i]=o.compact(i,s).then(e=>{this.urlsFetched.push(i);for(let t of e["@graph"])if(t["geo:long"]&&!this.nodes[t["@id"]])t.neighbours=[],this.nodes[t["@id"]]=t;else if("osm:Way"===t["@type"]){let e=t,n=null;for(let t of e["osm:hasNodes"])n&&(this.nodes[t].neighbours.push(n),this.nodes[n].neighbours.push(t)),n=t}delete this.sharedPromises[i]},e=>{delete this.sharedPromises[i],console.error(e)}),l.push(this.sharedPromises[i]))}return Promise.all(l).then(()=>{let n=this.findClosestNode(e),r=this.findClosestNode(t);console.log("FROM:",n,"TO:",r);for(let e in this.nodes){let t=this.nodes[e];this.graph[t["@id"]]={};for(let e of t.neighbours){let n=a({latitude:t["geo:lat"],longitude:t["geo:long"]},{latitude:this.nodes[e]["geo:lat"],longitude:this.nodes[e]["geo:long"]});this.graph[t["@id"]][e]=n}}return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:i.find_path(this.graph,n,r).map(e=>{let t=this.nodes[e];return[t["geo:long"],t["geo:lat"]]})}}]}})}}"undefined"!=typeof window&&(window.RoutableTilesClient=s),e.exports=s},function(e,t){function n(e,t){var n=Math.pow(2,t);return Math.floor((e+180)/360*n)}function r(e,t){var n=e*Math.PI/180,r=Math.pow(2,t);return Math.floor((1-Math.log(Math.tan(n)+1/Math.cos(n))/Math.PI)/2*r)}t.tilesInBbox=function(e,t){for(var o=[],i=n(e.left,t),a=n(e.right,t),s=r(e.top,t),u=r(e.bottom,t),l=i;l<=a;){for(var c=s;c<=u;)o.push({x:l,y:c,z:t}),c++;l++}return o}},function(e,t,n){"use strict";var r={single_source_shortest_paths:function(e,t,n){var o={},i={};i[t]=0;var a,s,u,l,c,f,d,h=r.PriorityQueue.make();for(h.push(t,0);!h.empty();)for(u in s=(a=h.pop()).value,l=a.cost,c=e[s]||{})c.hasOwnProperty(u)&&(f=l+c[u],d=i[u],(void 0===i[u]||d>f)&&(i[u]=f,h.push(u,f),o[u]=s));if(void 0!==n&&void 0===i[n]){var p=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(p)}return o},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],r=t;r;)n.push(r),e[r],r=e[r];return n.reverse(),n},find_path:function(e,t,n){var o=r.single_source_shortest_paths(e,t,n);return r.extract_shortest_path_from_predecessor_list(o,n)},PriorityQueue:{make:function(e){var t,n=r.PriorityQueue,o={};for(t in e=e||{},n)n.hasOwnProperty(t)&&(o[t]=n[t]);return o.queue=[],o.sorter=e.sorter||n.default_sorter,o},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=r},function(e,t,n){var r,o,i,a=(r={km:6371,mile:3960,meter:6371e3,nmi:3440},o=function(e){return e*Math.PI/180},i=function(e,t){switch(e){case"[lat,lon]":return{latitude:t[0],longitude:t[1]};case"[lon,lat]":return{latitude:t[1],longitude:t[0]};case"{lon,lat}":return{latitude:t.lat,longitude:t.lon};case"{lat,lng}":return{latitude:t.lat,longitude:t.lng};case"geojson":return{latitude:t.geometry.coordinates[1],longitude:t.geometry.coordinates[0]};default:return t}},function(e,t,n){var a=(n=n||{}).unit in r?r[n.unit]:r.km,s=i(n.format,e),u=i(n.format,t),l=o(u.latitude-s.latitude),c=o(u.longitude-s.longitude),f=o(s.latitude),d=o(u.latitude),h=Math.sin(l/2)*Math.sin(l/2)+Math.sin(c/2)*Math.sin(c/2)*Math.cos(f)*Math.cos(d),p=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h));return n.threshold?n.threshold>a*p:a*p});e.exports&&(e.exports=a)}]);